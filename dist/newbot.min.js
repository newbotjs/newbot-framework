!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=76)}([function(t,e,n){var r=n(43),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(8),i=n(90),o=n(91),s="[object Null]",a="[object Undefined]",c=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:s:c&&c in Object(t)?i(t):o(t)}},function(t,e,n){const r=n(77),i=n(127),o=n(2),s=n(13),a=n(128),c=n(155),u=n(3),l=n(156),f=n(164),h=n(166),p=n(167),d=n(168),v=n(169),g=n(173),m=n(174),y=n(175),b=n(177),x=n(54),_=n(69);t.exports={merge:r,isString:i,isObjectLike:o,isPlainObject:x,isFunction:s,clone:a,cloneDeep:c,isArray:u,get:f,set:l,isUndefined:h,isNull:p,isBoolean:d,isNumber:_,random:v,last:g,flatten:y,isNaN:m,difference:b}},function(t,e,n){var r=n(89),i=n(94);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(0).Symbol;t.exports=r},function(t,e,n){var r=n(33),i=n(26);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,c=e.length;++a<c;){var u=e[a],l=o?o(n[u],t[u],u,n,t):void 0;void 0===l&&(l=t[u]),s?i(n,u,l):r(n,u,l)}return n}},function(t,e,n){var r=n(79),i=n(80),o=n(81),s=n(82),a=n(83);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(12);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(4),i=n(1),o="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",c="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==s||e==a||e==o||e==c}},function(t,e,n){var r=n(6)(Object,"create");t.exports=r},function(t,e,n){var r=n(103);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(13),i=n(53);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(57),i=n(118),o=n(16);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(4),i=n(2),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==o}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],l=!1,f=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){const r=n(5);t.exports=class{constructor(t,e){this.decorator=t,this.otherDecorators={},this.name=this.decorator.name,this.instructions=t.instructions,this.params=t.params,this.fnName=e}findParam(t){return 0===r.difference(this.params,t).length}}},,,function(t,e){t.exports=new class{is(){return"undefined"!=typeof navigator}}},function(t,e,n){var r=n(6)(n(0),"Map");t.exports=r},function(t,e,n){var r=n(95),i=n(102),o=n(104),s=n(105),a=n(106);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(46);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(110);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(51)(Object.getPrototypeOf,Object);t.exports=r},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(112),i=n(2),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},function(t,e,n){(function(t){var r=n(0),i=n(113),o=e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;t.exports=c}).call(this,n(27)(t))},function(t,e,n){var r=n(26),i=n(12),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(57),i=n(131),o=n(16);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){var r=n(135),i=n(62),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),r(s(t),function(e){return o.call(t,e)}))}:i;t.exports=a},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e){const n={"variable.not.defined":["ReferenceError",t=>`${t.variable} is not defined`],"function.not.defined":["ReferenceError",t=>`${t.name}(...) function is not defined`],"arithmetic.error":["ArithmeticError",(t,e)=>"Expression is not correct. "+e.message],"type.error":["TypeError",(t,e)=>"Type is not correct. "+e.message]};t.exports=class{constructor(t,e,n){this.script=t,this.namespace=e,this.reject=n}throw(t,e,r){let i,o,s;if(!t)throw r;if(n[e]?(o=n[e][0],s=n[e][1]):(o="InternalError",s=(()=>r.message)),s=s(t,r),t._file){let{line:e,column:n}=t._file.start;i=this.makeError(o,s,{line:e,column:n})}else i=new Error(s);if(!this.reject)throw i;this.reject(i)}syntax(t){if(!t.location)throw t;const{line:e,column:n}=t.location.start,r=this.makeError("syntax","Syntax Error",{line:e,column:n});if(!this.reject)throw r;this.reject(r)}makeError(t,e,n){var r,i=n.line,o=n.column,s=(n.filename,this.script||n.src),a=i+(o?":"+o:"");const c=this.namespace?this.namespace.split("-").join(" / "):"unknow",u=`Skill : ${c}. Line ${i}`;if(s&&i>=1&&i<=s.split("\n").length){var l=s.split("\n"),f=Math.max(i-3,0),h=Math.min(l.length,i+3);r=u+"\n\n"+l.slice(f,h).map(function(t,e){var n=e+f+1,r=(n==i?"  > ":"    ")+n+"| ",s=r+t;return n===i&&o>0&&(s+="\n",s+=Array(r.length+o).join("-")+"^"),s}).join("\n")+"\n\n"+e}else r=u+":"+a+"\n\n"+e;const p=new Error(r);return p.skill=c,p.line=i,p.column=o,p}}},function(t,e,n){(function(e){const r=n(5),i=n(189),o=n(190),s=n(191),a=n(192),c=n(193),u=n(72),l=n(209),f=(n(216),n(217)),h=n(218),p=n(74),d=n(23),v=n(219);class g{constructor(t={}){this._nlp={},this.config={},this._format={},this._conditions={},this._dbHook={},this._hooks={},this._originNlpObject={},this.script="",this._obj=[],this._skills=new Map,this._users=new Map,this.namespace="default",this._functions=l,this.lang=o.instance(),this.options=t,this.parentPath=t._parentPath||this._findParentPath(),r.isString(t)&&(t={file:t}),Object.keys(t).length>0&&this.loadOptions(t)}static get version(){return v.version}static loader({systemjs:t}){t.config({meta:{"*.converse":{loader:e+"/../loader/converse-loader.js"}}}),g.SystemJS=t}async loadOptions(t){if(t.file&&this.file(t.file),t.code&&this.code(t.code),t.languages&&this.configure({languages:t.languages}),t.nlp)for(let e in t.nlp)this.nlp(e,t.nlp[e]);if(t.conditions&&this.conditions(t.conditions),t.functions&&this.functions(t.functions),t.formats)for(let e in t.formats)this.format(e,t.formats[e]);t.shareFormats&&this.shareFormats(),t.shareNlp&&this.shareNlp(),t.propagateNlp&&this.propagateNlp(),t.skills&&await this.setSkills(t.skills),this.load()}get users(){return this._users}configure(t){return this.config=r.merge(this.config,t),this}file(t){return this._file=t,this}code(t){return t.code?this.script=t.code:this.script=t,(t.compiled||r.isArray(this.script))&&(this._compiled=t.compiled||this.script),this}async open(t){return this._file&&g.SystemJS&&this.code(await g.SystemJS.import(this._file)),this.script?this._compiled?this._obj=r.merge([],this._compiled):(this._transpiler=new c(this.script,this.namespace),this._obj=this._transpiler.run(t)):this._obj=[],this._interpreter=new u(this._obj,this.users,this),this}exec(t,e,n,i={globalNoExec:!0}){let o;return new Promise(async(s,c)=>{let u;if(await this.open(c),!n){if(!d.is())throw"On NodeJS, you must give an identifier to the user. `.exec(input, userId, output)`";n=e,e="conversescript-user"}if(r.isObjectLike(t)||(t={text:t}),o=this._users.get(e),r.isFunction(n)&&(n={output:n}),o||(o=new a(e),this._users.set(e,o),i.start=!0),n.magicVariables)for(let t in n.magicVariables)o.setMagicVariable(t,n.magicVariables[t]);o.setMagicVariable("userId",e),o.resetHistory();let l=Promise.resolve().then(()=>{if(n.preUser)return n.preUser(o,this)}).then(()=>this.propagateExec(t,e,n,i)).then(t=>{u=(u=!!t)||!u&&o.getAddress(this.namespace)});(l="event"!==t.type?l.then(()=>u?this.execNlp(t,e):t):l.then(()=>t)).then(async t=>{let e={};u&&(e=await this._interpreter.exec(o,t,n,i))&&(i.globalNoExec&=e.nothing),s(e)}).catch(t=>{c(t)})}).then(e=>(this.parent||(i.globalNoExec&&this._hooks.nothing&&this._hooks.nothing(t.text,{user:o},n.data),this._hooks.finished&&this._hooks.finished(t.text,{user:o,data:n.data}),o._nlpCache={}),e))}propagateExec(t,e,n,i){const o=this._users.get(e);let s=r.clone(n),a=!0,c=Promise.resolve();return this._skills.forEach(n=>{r.isArray(n)||(n=[n]);for(let u of n)c=c.then(()=>new Promise((n,c)=>{let l=Promise.resolve();u._shareFormat&&(this._format=r.merge(u._format,this._format)),u._users=this._users,u._condition&&(l=u._condition(s.data,o),p(l)||(l=Promise.resolve(l))),l.then((r=!0)=>{if(r)return u.exec(t,e,s,i).then((t={})=>{a&=t.noExec,n()}).catch(c);n()})}))}),c.then(()=>a)}skills(){return this._skills}execNlp(t,e){t.intents={};const n=this.users.get(e);let i=Promise.resolve(),o=Object.keys(this._nlp).map(t=>this._nlp[t]);o=o.sort((t,e)=>e.priority-t.priority);for(let s of o){const o=s.uuid;i=i.then(r=>{if("break"==r)return;const i=n._nlpCache[s.name];return i&&Object.is(i.object,this._originNlpObject[o])?i.result:s.exec(t.text,e,this)}).then(e=>{if(!e)return;n._nlpCache[s.name]={object:this._originNlpObject[o],result:e};const i=Object.keys(e).length;if(!r.isUndefined(s.priority)&&i>0)return t.intents=e,"break";t.intents=r.merge(t.intents,e)})}return i.then(()=>t)}event(t,...e){let n,i,o,s=Promise.resolve();switch(e.length){case 2:r.isArray(e[0])?i=e[0]:o=e[0],n=e[1];break;case 3:o=e[0],i=e[1],n=e[2];break;default:i=this.users}return i&&!r.isArray(i)&&(i=[i]),i.forEach(e=>{s=s.then(()=>(e.id&&(e=e.id),this.exec({type:"event",name:t,data:o},e,n)))}),s}saveSession(t,e){const n=this.users.get(e);if(!n)throw`Unable to save the user ${e} session because there is no exists`;return n.saveSession(t),this}format(t,e){return this._format[t]=e,this}functions(t){return this._functions=r.merge(this._functions,t),this}execFunction(t,e,n,i,{deep:o,data:s,execution:a,level:c,ins:u}){let l=t;if(o&&(l+="."+o),!this._functions[t])throw`${o.join(".")+"."+t}() not exists`;let f,{$call:h,$mock:p,$params:d}=this._functions[t];this._functions[t].namespace=this.namespace,h||(h=this._functions[t]),o&&o.length>0&&(h=r.get(h,o)),d&&(d=d.map(t=>{switch(t){case"users":return this.users;case"user":return i;case"data":return s;case"execution":return a;case"level":return c;case"ins":return u}return t}),e=e.concat(d));const v={users:this.users,user:i,data:s,execution:a,level:c,ins:u};return this.testing&&this._mock[l]?(f=this._mock[l].call(i,...e),p&&(o&&(p=r.get(p,o)),f=p.call(this._mock[l],...[f,...d]))):(this._functions[t].converse=v,f=h.call(this._functions[t],...e)),n?f&&f.then?f.then(()=>{i.setMagicVariable("error",null),n()}).catch(t=>{i.setMagicVariable("error",t),n()}):void n(f):f}nlp(t,e,n){const r=Symbol();return this._originNlpObject[r]=e,this._nlp[t]||(this._nlp[t]=new f(t,this,{...n,uuid:r})),e&&this._nlp[t].add(e),this._nlp[t]}useNlp(t){return this.currentNlp=t,this}getCurrentNlp(){return this._nlp[this.currentNlp]}async loadLanguage(){if(!this.config.languages)return;const t=this.config.languages.path||"./languages";let{packages:e,default:n}=this.config.languages;r.isArray(e)?this.lang.init(e,t+"/"):(n||(n=Object.keys(e)[0]),this.lang.packages(e).default(n))}load(){return this.loadLanguage(),this}loadUsers(t){for(let e of t){let t=e.id||e._id,n=new a(t).fromJson(e);this.users.set(t,n)}}use(t){this._hooks=t}_findParentPath(){const t=s(),n=e;for(let e of t){let t=e.getFileName(),r=i.dirname(t);if(r!==n&&!/testing$/.test(r))return r}}async openSkills(t){let e;d.is()||(e=await new Promise(async(t,e)=>{try{const n=await h.readFile(`${this.parentPath}/package.json`,{encoding:"utf-8"});t(JSON.parse(n))}catch(n){if(n)return"ENOENT"==n.code?t():e(n)}})),e&&e.converse&&e.converse.dependencies&&(this.setSkills(e.converse.dependencies),t&&t())}async skill(t,e=t){let n=e.skill||e;n.hasOwnProperty("default")&&(n=n.default);let i,o=n;if(!r.isArray(n)){if(r.isString(n)){let t=n.split(":");if(t.length>1?(o=n=t[1],t=t[0]):t=null,d.is()&&"node"==t)return this;if(!d.is()&&"browser"==t)return this;/\//.test(n)||(o=this.config.pathSkills||"skills",o+=`/${n}`),g.SystemJS&&(d.is()?(SystemJS.set("conversescript",SystemJS.newModule({Converse:g})),o.endsWith(".js")||(o+=".js"),i=await SystemJS.import(o)):(o="."==o[0]?this.parentPath+"/"+o:"@node/"+o,i=await SystemJS.import(o)))}else i=n;if(i.hasOwnProperty("default")&&(i=i.default),r.isFunction(i)){const t=e.params||[];(i=r.isPlainObject(t)?i.call(i,t):i.apply(i,t)).then&&(i=await i)}if(r.isPlainObject(i)&&(i._parentPath=this.parentPath,this._propagateNlp&&(i.propagateNlp=!0),i=new g(i)),i.namespace=(this.namespace?this.namespace+"-":"")+t,i.parent=this,i._condition=e.condition,i._shareNlp&&(this._nlp=r.merge(this._nlp,i._nlp),i._nlp={}),this._propagateNlp&&(i._nlp=r.merge(this._nlp,i._nlp),i._originNlpObject=r.merge(this._originNlpObject,i._originNlpObject)),this._skills.has(t)){const e=this._skills.get(t);i=r.isArray(e)?[...e,i]:[e,i]}return this._skills.set(t,i),this}for(let e of n)await this.skill(t,e)}async setSkills(t){for(let e in t)await this.skill(e,t[e]);return this}getSkill(t){return this._skills.get(t)}shareFormats(){this._shareFormat=!0}shareNlp(){this._shareNlp=!0}propagateNlp(){this._propagateNlp=!0}conditions(t){this._conditions=r.merge(this._conditions,t)}getAllIntents(){let t=[],e=this.open().then(()=>{t=this._interpreter.decorators.get("Intent")});return this._skills.forEach(n=>{r.isArray(n)||(n=[n]);for(let r of n)e=e.then(()=>r.getAllIntents()).then(e=>t=t.concat(e))}),e.then(()=>t)}}t.exports=g}).call(this,"/")},,,function(t,e,n){var r=n(10),i=n(84),o=n(85),s=n(86),a=n(87),c=n(88);function u(t){var e=this.__data__=new r(t);this.size=e.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=s,u.prototype.has=a,u.prototype.set=c,t.exports=u},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(7))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(26),i=n(12);t.exports=function(t,e,n){(void 0===n||i(t[e],n))&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(6),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){(function(t){var r=n(0),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(27)(t))},function(t,e,n){var r=n(28);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(111),i=n(29),o=n(30);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(16),i=n(2);t.exports=function(t){return i(t)&&r(t)}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e,n){var r=n(4),i=n(29),o=n(2),s="[object Object]",a=Function.prototype,c=Object.prototype,u=a.toString,l=c.hasOwnProperty,f=u.call(Object);t.exports=function(t){if(!o(t)||r(t)!=s)return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==f}},function(t,e,n){var r=n(114),i=n(56),o=n(115),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(117),i=n(31),o=n(3),s=n(32),a=n(34),c=n(55),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),l=!n&&i(t),f=!n&&!l&&s(t),h=!n&&!l&&!f&&c(t),p=n||l||f||h,d=p?r(t.length,String):[],v=d.length;for(var g in t)!e&&!u.call(t,g)||p&&("length"==g||f&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,v))||d.push(g);return d}},function(t,e,n){var r=n(59),i=n(121),o=n(123);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(12),i=n(16),o=n(34),s=n(1);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(42),i=n(129),o=n(33),s=n(130),a=n(133),c=n(47),u=n(49),l=n(134),f=n(136),h=n(137),p=n(138),d=n(139),v=n(144),g=n(145),m=n(50),y=n(3),b=n(32),x=n(1),_=n(35),w=1,j=2,k=4,O="[object Arguments]",S="[object Function]",A="[object GeneratorFunction]",E="[object Object]",P={};P[O]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[E]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[S]=P["[object WeakMap]"]=!1,t.exports=function t(e,n,T,I,F,V){var N,L=n&w,M=n&j,$=n&k;if(T&&(N=F?T(e,I,F,V):T(e)),void 0!==N)return N;if(!x(e))return e;var U=y(e);if(U){if(N=v(e),!L)return u(e,N)}else{var B=d(e),C=B==S||B==A;if(b(e))return c(e,L);if(B==E||B==O||C&&!F){if(N=M||C?{}:m(e),!L)return M?f(e,a(N,e)):l(e,s(N,e))}else{if(!P[B])return F?e:{};N=g(e,B,t,L)}}V||(V=new r);var z=V.get(e);if(z)return z;V.set(e,N);var D=$?M?p:h:M?keysIn:_,R=U?void 0:D(e);return i(R||e,function(r,i){R&&(r=e[i=r]),o(N,i,t(r,n,T,i,e,V))}),N}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(37),i=n(29),o=n(36),s=n(62),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:s;t.exports=a},function(t,e,n){var r=n(37),i=n(3);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},function(t,e,n){var r=n(3),i=n(158),o=n(159),s=n(162);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(18),i=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e,n){var r=n(4),i=n(2),o="[object Number]";t.exports=function(t){return"number"==typeof t||i(t)&&r(t)==o}},function(t,e,n){var r=n(37),i=n(176);t.exports=function t(e,n,o,s,a){var c=-1,u=e.length;for(o||(o=i),a||(a=[]);++c<u;){var l=e[c];n>0&&o(l)?n>1?t(l,n-1,o,s,a):r(a,l):s||(a[a.length]=l)}return a}},function(t,e){},function(t,e,n){const r=n(5),i=n(194),o=n(197),s=n(198),a=n(74),c=n(199),u=n(203),l=n(38);class f{constructor(t,e,n,r,i){this._nothing=!1,this.user=t,this._input=e,this.input=""+e.text,this.intents=e.intents,"event"===e.type&&(this.event={type:e.type,name:e.name,data:e.data}),this.output=n.output,this.session=n.session,this.propagate=r,this.start=r.start,this.options=n,this.interpreter=i,this.converse=this.interpreter.converse,this.parent=this.converse.parent,this.decorators=i.decorators,this.hooks=i.converse._hooks,this.obj=i._obj,this.namespace=i.namespace,this._finishScript=this.options._finishScript,this._errorScript=this.options._errorScript,this.error=new l(i.converse.script,this.namespace,this._errorScript),this.user.setMagicVariable("text",this.input),this.instructionsRoot(()=>{this.event?this.triggerEvent():this.go().catch(this._errorScript)})}deepBlock(t,e,n=0){const i=e[n],{index:o,level:s}=this.interpreter.index[i],a=t.instructions[o],c=r.merge(a,{indexBlock:o});return e[n+1]?[c,...this.deepBlock(a,e,n+1)]:[c]}triggerEvent(){const t=this.decorators.get("Event",["on",this.event.name]);t.length>0?(this.event.data&&this.user.setMagicVariable("event",this.event.data),this.decorators.exec(t,this)):(this._noExec=!0,this.end())}triggerAction(){const t=this.action(this.input);if(t){this.user.setMagicVariable("action",t.value);const e=this.decorators.get("Action",t.name);if(e.length>0)return this.decorators.exec(e,this),!0}}action(t){const e=t.match(/^action\?([a-zA-Z0-9_-]+)(=?)(.*)$/);if(!e)return!1;const n={name:e[1]};return e[3]&&(n.value=e[3]),n}async go(t=0){const e=this,n=this.interpreter.index[this.user.getAddress(this.namespace)];let i=!1,o=!1;const s={start:this.decorators.get("Event","start"),startAndIntent:this.decorators.get("Event","startAndIntent"),nothing:this.decorators.get("Event","nothing")};if(this.user.addressStackIslocked(this.namespace))return this.stopScript();if(this.triggerAction())return this.stopScript();if(this.decorators.get("Intent").length&&(o=await this.decorators.execMethod("Intent","run",this))&&(i=!0),!o&&n){let{index:e,level:o,deep:s}=n,a=this.interpreter.fn[o];this.user.popAddress(this.namespace);const c=e=>{this.execFn(a,e+1,e=>{if(this.parent){const t=this.user.getAddress(this.parent.namespace),n=this.parent._interpreter.index[t],i=r.last(this.namespace.split("-"));this.parent.bufferFunction=(t=>{t.setReturnVariable({name:i+"-"+e.level},e.value,n.level)})}this.setVariable({variable:"__return_"+e.level},e.value,"start"),this.go(t+1)})},u=(t,e,n,r)=>{let i=t[n];n<0?r(t[0]):this.execBlock(i,e+1,o,()=>u(t,i.indexBlock,n-1,r))};if(s.length>0){const t=this.deepBlock(a,s);u(t,e,t.length-1,t=>{c(t.indexBlock)})}else c(e);i=!0}else!o&&this.start&&s.start.length?i=await this.decorators.exec(s.start,this):o&&this.start&&s.startAndIntent.length&&(i=await this.decorators.exec(s.startAndIntent,this),o&&!i&&(i=!0));i||async function(){0===t&&(e._noExec=!0,e._nothing=!0,s.nothing.length&&(e.user.nothingSkill||(e.user.nothingSkill=e)),!e.parent&&e.user.nothingSkill&&await e.user.nothingSkill.execNothing()),e.end()}()}execNothing(){const t=this.decorators.get("Event","nothing");return this._noExec=!1,this.decorators.exec(t,this)}stopScript(){this.parent||(this.user.nothingSkill=null),this._finishScript({noExec:this._noExec,nothing:this._nothing})}end(){this.options.finish&&this.options.finish.call(this),this.user.clearAddress(this.namespace),this.stopScript()}unlockParent(t){this.parent&&this.user.unlockAddressStack(this.parent.namespace,t)}instructionsRoot(t){this.converse.bufferFunction&&(this.converse.bufferFunction(this),this.converse.bufferFunction=null),this.instructions(this.obj,0,"root",t)}async instructions(t,e,n="root",i,o={}){let s=t[e];try{const{isBlock:a}=o,c=({stop:r,value:s}={})=>(r&&(e=t.length,o.value=s,o.stop=r),this.instructions(t,e+1,n,i,o));if(!s)return a||(this.unlockParent(n),this.options.finishFn&&this.options.finishFn.call(this,n)),i&&i({stop:o.stop,value:o.value,level:n}),void(a||this.user.garbage(n,this.namespace));if(!r.isUndefined(s.return)){const t=await this.getValue(s,s.return,n);return void(a?i({stop:!0,value:t}):c({stop:!0,value:t}))}if(s._pointer=e,s._instructions=t,this.user.addHistory(s),s.group){let t=s.group[r.random(0,s.group.length-1)];t.decorators=s.decorators,s=t}if(s.condition)await this.execCondition(s,n,c);else if(s.variable)await this.execVariable(s,n,c);else if(s.loop)await this.execLoop(s,n,c);else if(s.output&&"root"!=n)this.execOutput(s,n,c);else if(s.type&&!o.refresh)switch(s.type){case"function":c();break;case"executeFn":let t=await this.findFunctionAndExec(s,n);this.setReturnVariable(s,t,n),c()}}catch(t){this.error.throw(s,t.id,t)}}findFunctionAndExec(t,e,n){return t=r.cloneDeep(t),new Promise(async(i,o)=>{try{if(!r.isString(t.name)){const{variable:e,type:n,deep:r}=t.name;e&&(t.name=e),t.deep=r}const s=async(t,o,s)=>{if(t.interpreter.fn[o.name]){const n=o.params,a=t.interpreter.fn[o.name],c=a.params;s&&this.user.lockAddressStack(this.namespace,o.name),this.user.addAddress(o.id,this.namespace);let u=[];if(c)for(let i=0;i<c.length;i++)u.push(new Promise(async s=>{await t.execVariable({variable:c[i],value:r.isUndefined(n[i])?null:await this.getValue(o,n[i],e)},o.name,s)}));return Promise.all(u).then(()=>t.execFn(a,0,t=>{this.user.popAddress(this.namespace),i(t.value)})),!0}if(t.hasApiFn(o.name)){let r=await this.execApiFn(o,e,n,{deep:o.deep,data:this.options.data,context:t});return"Prompt"!=o.name&&"Input"!=o.name&&i(r),!0}return!1};if(!await s(this,t)){const n=this.converse.skills().get(t.name);if(n){t.name=t.deep[0],t.deep.splice(0,1),await s(n._interpreter.execution,t,!0)||this.error.throw(t,"function.not.defined")}else if(t.deep){const n=t.deep.slice(0,-1),o={variable:t.name,deep:n};t.deep.length>1&&(o.type="object");const s=await this.getValue(t,o,e),a=s[r.last(t.deep)];a?i(a.apply(s,t.params)):this.error.throw(t,"function.not.defined")}else this.error.throw(t,"function.not.defined")}}catch(t){o(t)}})}getScope(t){return"root"==t?this.user.getVariables(this.namespace):this.user.getVariableInFonction(this.namespace,t)}getVariable(t,e,n){const i=!r.isUndefined(n);let o=t.variable;const s=this.user.getVariableInFonction(this.namespace,e,o);if(/^\$/.test(o)){const r=this.user.getVariable(this.namespace,o);return i&&!this.setDeepObject(t,r,n,e)&&this.user.setVariable(this.namespace,o,n),this.getDeepObject(t,r,e)}if(i&&!this.setDeepObject(t,s,n,e)&&this.user.setVariableInFonction(this.namespace,e,o,n),!r.isUndefined(s))return this.getDeepObject(t,s,e)}setVariable(t,e,n){this.getVariable(t,n,e)}setReturnVariable(t,e,n){let r=t.name;"object"==r.type&&(r=r.variable+"-"+r.deep.join("-")),this.setVariable({variable:"__return_"+r},e,n)}setMagicVar(t,e){this.user.magicVar[t]=e}getMagicVar(t,e,n){const r=this.user.magicVar[t.replace(":","")];return this.getDeepObject(e,r,n)}async _deepObject(t,e,n,i){const o=!r.isUndefined(i);let s=await this.execParams(t,t.deep,n);return r[o?"set":"get"](e,s,i)}getDeepObject(t,e,n){return"object"!=t.type?e:this._deepObject(t,e,n)}setDeepObject(t,e,n,r){return"assignObject"==t.type&&this._deepObject(t,e,r,n)}getValue(t,e,n,i){return new Promise(async(o,a)=>{try{this.getScope(n);let u=e;if(null===u)return o(u);if(e.regexp)u=new RegExp(e.regexp,e.flags.join(""));else if(r.isArray(e))u=await s.map(e,e=>this.getValue(t,e,n));else if(e.expression)u=await this.execExpression(t,e.expression,e.variables,n);else if(e.variable)if(/^:/.test(e.variable)){let t=u.variable;u=this.getMagicVar(t,u,n)}else u=await this.getVariable(e,n);else if(e.text&&!e.__deepIndex)u=await new Promise((r,i)=>{c(e.text,/\{([^\}]+)\}/g,async(r,i,o,s,a)=>{a(null,await this.getValue(t,e.variables[i].value,n))},(t,e)=>{r(e)})});else if("executeFn"==e.type)u=await this.findFunctionAndExec({...e,id:t.id},n);else if(u.__deepIndex)for(let e of u.__deepIndex){let o=await this.getValue(t,r.get(u,e),n,i);r.set(u,e,o)}r.isString(u)&&"#"===u[0]&&(u=await this.translate(t,u.substr(1),n)),o(u)}catch(t){a(t)}})}async execBlock(t,e=0,n,i){let o;if(t.varLocal){let e=await this.getValue(t,t.array,n);if(r.isNumber(e))e=new Array(e+1).fill(0).map((t,e)=>e);else if(r.isPlainObject(e))delete e.__deepIndex,e=Object.values(e);else if(!r.isString(e)&&!r.isArray(e)){const t=new Error("Number, Object, String and Array are only accepted for this loop");throw t.id="type.error",t}t.array=e,o=this.getVariable({variable:"__"+t.varLocal.variable},n),this.setVariable(t.varLocal,t.array[o],n)}await this.instructions(t.instructions,e,n,async e=>{t.loop?t.varLocal?o<t.array.length-1?(this.setVariable({variable:"__"+t.varLocal.variable},o+1,n),await this.execBlock(t,0,n,i)):i(e):this.execCondition(t,n,i):i(e)},{isBlock:!0})}async execLoop(t,e,n){this.setVariable({variable:"__"+t.varLocal.variable},0,e),await this.execBlock(t,0,e,n)}execCondition(t,e,n){return new Promise((n,r)=>{this.getValue(t,t.condition,e).then(n).catch(r)}).then(i=>{switch(t.keyword){case"unknown":i=r.isUndefined(i)||r.isNull(i);break;case"defined":i=!r.isUndefined(i)&&!r.isNull(i)}i?this.execBlock(t,0,e,n):t.conditionsElse?this.execBlock(t.conditionsElse,0,e,n):n()})}execExpression(t,e,n,i){return new Promise(async(s,a)=>{e=(e=(e=(e=(e=await new Promise((o,s)=>{c(e,/\{([0-9]+)\}/g,async(e,o,s,a,c)=>{let u=await this.getValue(t,n[o],i);/^[0-9]+(\.[0-9]+)?$/.test(u)||r.isBoolean(u)||null===u||(u=`"${u}"`),c(null,u)},(t,e)=>{o(e)})})).replace(/'/g,'"')).replace(/not/g,"!")).replace(/and/g,"&&")).replace(/or/g,"||");try{const t=o(e);s(this.arithmetic(t))}catch(t){t.id="arithmetic.error",a(t)}})}arithmetic(t){let e,n;switch(t.left&&(e=this.arithmetic(t.left)),t.right&&(n=this.arithmetic(t.right)),t.type){case"BinaryExpression":switch(t.operator){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"==":return e==n;case">=":return e>=n;case"<=":return e<=n;case">":return e>n;case"<":return e<n}break;case"LogicalExpression":switch(t.operator){case"&&":return e&&n;case"||":return e||n}break;case"UnaryExpression":switch(t.operator){case"!":return!this.arithmetic(t.argument);case"-":return-this.arithmetic(t.argument)}break;default:return t.value}}execVariable(t,e,n){return new Promise((n,r)=>{this.getValue(t,t.value,e).then(n).catch(r)}).then(i=>{let o=this.getScope(e);r.isUndefined(o[t.variable.replace("$","")])||"root"!=e||this.start?(this.setVariable(t,i,e),n()):n()})}async translate(t,e,n,r=[]){const{converse:i}=this.interpreter,o=this.user.getLang()||i.lang.current;return i.lang.data[o]&&i.lang.get(e,null,o)&&(r=await this.execParams(t,r,n),e=i.lang.translate(e,...[o,...r])),e}execOutput(t,e,n){return new Promise(async(i,o)=>{const{converse:s}=this.interpreter;let c=t.output;if(!this.output)return;if(t.output.variables&&(c=await this.getValue(t,t.output,e)),c=c.replace(/\r$/,""),c=await this.translate(t,c,e,t.params),t.decorators)for(let n of t.decorators)if("Format"==n.name){let r=[...n.params],i=(r=await this.execParams(t,r,e))[0];s._format[i]&&(r.splice(0,1),c=s._format[i].call(this.converse,c,r,this.options.data,this.user),a(c)&&(c=await c))}const u=t=>{const e=t||c,i=this.output(e,n,{user:this.user});r.isUndefined(i)||n()};this._triggerHook("sending",c,{user:this.user,data:this.options.data},(t,e)=>{if(t)throw t;u(e)})||u()})}execFn(t,e,n){r.isUndefined(this.interpreter.fn[t.name])&&this.error.throw(t,"function.not.defined"),this.instructions(t.instructions,e,t.name,n)}execParams(t,e,n,r){return e?s.map(e,e=>this.getValue(t,e,n,r)):Promise.resolve([])}async execApiFn(t,e,n,r){switch(t.name){case"Prompt":case"Input":return this.user.addAddress(t.id,this.namespace),this._triggerHook("prompt",t.params,{user:this.user,data:this.options.data,level:e}),this.options.waintingInput&&this.options.waintingInput.call(this,t.params,e),void this.stopScript()}return r.execution=this,r.level=e,r.ins=t,(r.context||this).interpreter.converse.execFunction(t.name,await this.execParams(t,t.params,e,n),n,this.user,r)}hasApiFn(t){return this.converse._functions[t]||-1!=["Prompt","Input"].indexOf(t)}_triggerHook(t,e,n,r,i=!0){let o=!1;return this.hooks[t]&&(o=!0,this.hooks[t](this.input,e,n,r)),i&&this.parent&&this.parent._hooks[t]&&(o=!0,this.parent._hooks[t](this.input,e,n,r)),o}}t.exports=class{constructor(t,e,n){this._obj=t,this.index={},this._users=e,this.var=[],this.fn={},this.converse=n,this.namespace=this.converse.namespace,this.decorators=new u(this),this.organize(this._obj)}organize(t,e="root",n=[]){const r=i=>{let o=t[i];if(o){if(o.id=this.setId(o,e),o.type&&"function"==o.type)return this.fn[o.name]=o,this.decorators.add(o),this.organize(o.instructions,o.name),void r(++i);(o.condition||o.loop)&&this.organize(o.instructions,e,n.concat(o.id)),this.index[o.id]={level:e,index:i,namespace:this.namespace,deep:n},r(++i)}};r(0)}setId(t,e){let n=e+"-"+i(JSON.stringify(t));this.namespace&&(n+="-"+this.namespace);let r=1;for(;this.index[n+"-"+r];)r++;return n+"-"+r}exec(t,e,n,i){return new Promise((o,s)=>{this.execution=new f(t,e,r.merge({_finishScript:o,_errorScript:s},n),i,this)})}}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e){t.exports=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}},,function(t,e,n){"use strict";n.r(e);var r=n(39),i=n.n(r);window.Converse=i.a,window.NewBot=i.a},function(t,e,n){var r=n(78),i=n(120)(function(t,e,n){r(t,e,n)});t.exports=i},function(t,e,n){var r=n(42),i=n(45),o=n(107),s=n(109),a=n(1),c=n(17);t.exports=function t(e,n,u,l,f){e!==n&&o(n,function(o,c){if(a(o))f||(f=new r),s(e,n,c,u,t,l,f);else{var h=l?l(e[c],o,c+"",e,n,f):void 0;void 0===h&&(h=o),i(e,c,h)}},c)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(11),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(11);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(11);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(11);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(10);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(10),i=n(24),o=n(25),s=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<s-1)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(13),i=n(92),o=n(1),s=n(44),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?h:a).test(s(t))}},function(t,e,n){var r=n(8),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,i=n(93),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(0)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(96),i=n(10),o=n(24);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(97),i=n(98),o=n(99),s=n(100),a=n(101);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(14);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(14),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(14),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(14),i="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},function(t,e,n){var r=n(15);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(15);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(15);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(15);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(108)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}},function(t,e,n){var r=n(45),i=n(47),o=n(48),s=n(49),a=n(50),c=n(31),u=n(3),l=n(52),f=n(32),h=n(13),p=n(1),d=n(54),v=n(55),g=n(116);t.exports=function(t,e,n,m,y,b,x){var _=t[n],w=e[n],j=x.get(w);if(j)r(t,n,j);else{var k=b?b(_,w,n+"",t,e,x):void 0,O=void 0===k;if(O){var S=u(w),A=!S&&f(w),E=!S&&!A&&v(w);k=w,S||A||E?u(_)?k=_:l(_)?k=s(_):A?(O=!1,k=i(w,!0)):E?(O=!1,k=o(w,!0)):k=[]:d(w)||c(w)?(k=_,c(_)?k=g(_):(!p(_)||m&&h(_))&&(k=a(w))):O=!1}O&&(x.set(w,k),y(k,w,m,b,x),x.delete(w)),r(t,n,k)}}},function(t,e,n){var r=n(0).Uint8Array;t.exports=r},function(t,e,n){var r=n(1),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(4),i=n(2),o="[object Arguments]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(4),i=n(53),o=n(2),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},function(t,e,n){(function(t){var r=n(43),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{return s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a}).call(this,n(27)(t))},function(t,e,n){var r=n(9),i=n(17);t.exports=function(t){return r(t,i(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(1),i=n(30),o=n(119),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(58),i=n(60);t.exports=function(t){return r(function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var c=n[r];c&&t(e,c,r,s)}return e})}},function(t,e,n){var r=n(122),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),c=Array(a);++s<a;)c[s]=o[e+s];s=-1;for(var u=Array(e+1);++s<e;)u[s]=o[s];return u[e]=n(c),r(t,this,u)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(124),i=n(126)(r);t.exports=i},function(t,e,n){var r=n(125),i=n(46),o=n(59),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,r=16,i=Date.now;t.exports=function(t){var e=0,o=0;return function(){var s=i(),a=r-(s-o);if(o=s,a>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(4),i=n(3),o=n(2),s="[object String]";t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&r(t)==s}},function(t,e,n){var r=n(61),i=4;t.exports=function(t){return r(t,i)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(9),i=n(35);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(30),i=n(132),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(51)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(9),i=n(17);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(9),i=n(36);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}},function(t,e,n){var r=n(9),i=n(63);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(64),i=n(36),o=n(35);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(64),i=n(63),o=n(17);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(140),i=n(24),o=n(141),s=n(142),a=n(143),c=n(4),u=n(44),l=u(r),f=u(i),h=u(o),p=u(s),d=u(a),v=c;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,r=n?u(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){var r=n(6)(n(0),"DataView");t.exports=r},function(t,e,n){var r=n(6)(n(0),"Promise");t.exports=r},function(t,e,n){var r=n(6)(n(0),"Set");t.exports=r},function(t,e,n){var r=n(6)(n(0),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(28),i=n(146),o=n(147),s=n(150),a=n(151),c=n(154),u=n(48),l="[object Boolean]",f="[object Date]",h="[object Map]",p="[object Number]",d="[object RegExp]",v="[object Set]",g="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",j="[object Int16Array]",k="[object Int32Array]",O="[object Uint8Array]",S="[object Uint8ClampedArray]",A="[object Uint16Array]",E="[object Uint32Array]";t.exports=function(t,e,n,P){var T=t.constructor;switch(e){case y:return r(t);case l:case f:return new T(+t);case b:return i(t,P);case x:case _:case w:case j:case k:case O:case S:case A:case E:return u(t,P);case h:return o(t,P,n);case p:case g:return new T(t);case d:return s(t);case v:return a(t,P,n);case m:return c(t)}}},function(t,e,n){var r=n(28);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e,n){var r=n(148),i=n(65),o=n(149),s=1;t.exports=function(t,e,n){var a=e?n(o(t),s):o(t);return i(a,r,new t.constructor)}},function(t,e){t.exports=function(t,e){return t.set(e[0],e[1]),t}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(152),i=n(65),o=n(153),s=1;t.exports=function(t,e,n){var a=e?n(o(t),s):o(t);return i(a,r,new t.constructor)}},function(t,e){t.exports=function(t,e){return t.add(e),t}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(8),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(61),i=1,o=4;t.exports=function(t){return r(t,i|o)}},function(t,e,n){var r=n(157);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e,n){var r=n(33),i=n(66),o=n(34),s=n(1),a=n(68);t.exports=function(t,e,n,c){if(!s(t))return t;for(var u=-1,l=(e=i(e,t)).length,f=l-1,h=t;null!=h&&++u<l;){var p=a(e[u]),d=n;if(u!=f){var v=h[p];void 0===(d=c?c(v,p,h):void 0)&&(d=s(v)?v:o(e[u+1])?[]:{})}r(h,p,d),h=h[p]}return t}},function(t,e,n){var r=n(3),i=n(18),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(160),i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=r(function(t){var e=[];return i.test(t)&&e.push(""),t.replace(o,function(t,n,r,i){e.push(r?i.replace(s,"$1"):n||t)}),e});t.exports=a},function(t,e,n){var r=n(161),i=500;t.exports=function(t){var e=r(t,function(t){return n.size===i&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(25),i="Expected a function";function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(163);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(8),i=n(67),o=n(3),s=n(18),a=1/0,c=r?r.prototype:void 0,u=c?c.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-a?"-0":n}},function(t,e,n){var r=n(165);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(66),i=n(68);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e){t.exports=function(t){return null===t}},function(t,e,n){var r=n(4),i=n(2),o="[object Boolean]";t.exports=function(t){return!0===t||!1===t||i(t)&&r(t)==o}},function(t,e,n){var r=n(170),i=n(60),o=n(171),s=parseFloat,a=Math.min,c=Math.random;t.exports=function(t,e,n){if(n&&"boolean"!=typeof n&&i(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=o(t),void 0===e?(e=t,t=0):e=o(e)),t>e){var u=t;t=e,e=u}if(n||t%1||e%1){var l=c();return a(t+l*(e-t+s("1e-"+((l+"").length-1))),e)}return r(t,e)}},function(t,e){var n=Math.floor,r=Math.random;t.exports=function(t,e){return t+n(r()*(e-t+1))}},function(t,e,n){var r=n(172),i=1/0,o=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===i||t===-i?(t<0?-1:1)*o:t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(1),i=n(18),o=NaN,s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=c.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):a.test(t)?o:+t}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(69);t.exports=function(t){return r(t)&&t!=+t}},function(t,e,n){var r=n(70);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var r=n(8),i=n(31),o=n(3),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(s&&t&&t[s])}},function(t,e,n){var r=n(178),i=n(70),o=n(58),s=n(52),a=o(function(t,e){return s(t)?r(t,i(e,1,s,!0)):[]});t.exports=a},function(t,e,n){var r=n(179),i=n(182),o=n(187),s=n(67),a=n(56),c=n(188),u=200;t.exports=function(t,e,n,l){var f=-1,h=i,p=!0,d=t.length,v=[],g=e.length;if(!d)return v;n&&(e=s(e,a(n))),l?(h=o,p=!1):e.length>=u&&(h=c,p=!1,e=new r(e));t:for(;++f<d;){var m=t[f],y=null==n?m:n(m);if(m=l||0!==m?m:0,p&&y==y){for(var b=g;b--;)if(e[b]===y)continue t;v.push(m)}else h(e,y,l)||v.push(m)}return v}},function(t,e,n){var r=n(25),i=n(180),o=n(181);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,t.exports=s},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(183);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(184),i=n(185),o=n(186);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return r.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s=i>=0?arguments[i]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return(r?"/":"")+(e=n(o(e.split("/"),function(t){return!!t}),!r).join("/"))||"."},e.normalize=function(t){var r=e.isAbsolute(t),i="/"===s(t,-1);return(t=n(o(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&i&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=i(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return i(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(19))},function(t,e,n){var r=function(){let t,e,r=!1;"undefined"==typeof window&&(t=n(71),r=!0);class i{constructor(){this.current="en",this.data={},this.options={},this._path=null,this._cache={},this._list=[]}instance(){return e=new i}set(t,e){return this.init(t,this._path,e),this}add(t,e,n,r){this.init(t,e,r,{namespace:n})}packages(t,e={}){let n=[];const r=e.namespace||"self";this._cache[r]||(this._cache[r]={});for(let e in t)this._cache[r][e]=t[e],n.push(e);return this.init(n,!1,!1,e)}default(t){this.current=t}all(e,n,r={}){const i=t=>{let i=[],o=/\.json$/;for(let e of t)o.test(e)&&i.push(e.replace(o,""));this.init(i,e,n,r)};n?t.readdir(e,(t,e)=>{if(t)throw t;i(e)}):i(t.readdirSync(e))}init(e,n,r,i={}){let o,s;const a=i.namespace||"self";"function"==typeof n&&(r=n,n=!1),this._path=n,e instanceof Array||(e=[e]),this._list=e;let c=(t=>t+="_"+t.toUpperCase())(this.getUserLanguage().replace(/\-.+/,""));-1==this._list.indexOf(c)?this.current=this._list[0]:this.current=c,n&&(o=n+this.current+".json");let u=(t,e,i)=>{let o;e||(e=this.current),n?(t=t.toString("utf8"),o=JSON.parse(t)):o=t,this._cache[a]||(this._cache[a]={});let[s,c]=o;this.data[e]={},this.options[e]={},this.data[e][a]=this._initMultiple(s),this.options[e][a]=c,this._cache[a][e]=t,r&&!i&&r.call(self)};if(this._cache[a]){for(let t in this._cache[a])u(this._cache[a][t],t);return this}if(t){if(r){let e=0;for(let i of this._list)t.readFile(n+i+".json",(t,n)=>{if(t)throw t;u(n,i,!0),e++,r&&e==this._list.length&&r.call(this)})}else for(let e of this._list)u(t.readFileSync(n+e+".json"),e,!0);return this}try{s=new XMLHttpRequest}catch(t){s=!1}return s.onreadystatechange=(()=>{4==s.readyState&&200==s.status&&u(s.responseText)}),s.open("GET",o,!0),s.send(),this}getUserLanguage(){const t=this._list[0];return r?t:navigator.language||navigator.userLanguage||t}_initMultiple(t){let e,n,r={},i={};function o(t,e,n,r){let i={},o=r?r[t]:e[t],s=n.split(" ");for(let r in o){let o=n.replace(t,r);e[n].text?i[o]={text:e[n].text,replacePattern:e[n].replacePattern.map(e=>t==e?r:e)}:i[o]={text:e[n],replacePattern:s.map(e=>t==e?r:e)}}return i}function s(t,e){for(let n in e)t[n]=e[n];return t}const a=JSON.parse(JSON.stringify(t));for(let c in a){let a=/^\$[^ ]+$/.test(c),u=/\[(.+)\]/,l=/\$[^ ]+/g;if(u.test(c)){e=u.exec(c)[1].split(",");for(let n of e)t[c.replace(u,n)]=t[c]}if(l.test(c)&&!a)if(r={},i={},r=o((n=c.match(l))[0],t,c),n.length>1)for(let e in r)s(t,i=o(n[1],r,e,t));else s(t,r);if(a)for(let e in t[c])t[e]=t[c][e]}return t}get(t,e,n){return n=n||this.current,e=e||"self",this.data[n]&&this.data[n][e]?this.replaceWorlds(this.data[n][e][t],t,e):""}capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}replaceWorlds(t,e,n){let r={};return t?(t.text&&(r=t,t=t.text),t.replace(/\{([0-9]+)\}/g,(t,i)=>{let o=r.replacePattern||e.split(" ");return this.get(o[i-1],n)})):t}getGroup(t,e="self"){let n=this.data[this.current][e]["$"+t],r=[];for(let t in n)r.push(t);return r}render(t,{patternStart:e="{{",patternEnd:n="}}",pipe:r="|",fnStart:i="",fnEnd:o="",paramsSeparator:s=":"}={},a){const c=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");e=c(e),n=c(n),r=c(r),i=c(i),o=c(o);let u=c(s);const l=new RegExp(`${e}([^${n}]+)${r}[ ]*t(${u}?${i}([^${n}]+)${o})?${n}`,"g");return t=t.replace(l,(t,e,n,r,i,o)=>(e=(e=e.replace(/["']/g,"")).trim(),r=r?(r=r.split(s)).map(t=>((t=t.trim())>=0||t<=0?t=+t:"true"==t?t="true"===t:"false"==t&&(t="false"===t),t)):[],a&&(r=[a,...r]),this.translate(e,...r)))}getPlurial(t,e,n,r){if(n=n||"self",r=r||this.current,t=Math.abs(t),!/^[0-9]+$/.test(t))return!1;let i=this.options[r][n].plurial[e];return i||(i=["s"]),t>2&&i[t-1]?i[t-1]:t>1?i[0]:i[1]||""}format(t,e,n,...r){let i,o,s=-1,a=t.match(/%[sdp]/g);if(!a)return t;for(let t of a)if(s++,"%d"==t)i=r[s];else if("%p"==t)break;return s=-1,t.replace(/%[sdp]([0-9]+)?/g,(t,a)=>(o=void 0!==r[++s]?r[s]:t,/^%p/.test(t)&&(null==i&&(i=o),"number"!=typeof i&&(i=0),o=this.getPlurial(i,t.replace("%",""),e,n)),o))}get load(){let t=this;return{Handlebars:t=>(t.registerHelper("t",function(t,e){var n=e.hash.nb,r=e.hash.if;return void 0===n?t.t():void 0===r?t.t(+n):t.t(r,+n)}),t),Pug:(e={})=>(e.translate=(e=>t.render(e)),e),Angular(e){e.module("Languages",[]).provider("Languages",function(){this.init=t.init.bind(i),this.$get=function(){return t}}).filter("t",function(){return function(t,...e){return t.t(...e)}})},get Vue(){return{install(e,n){e.Languages=t,e.filter("t",(e,...n)=>t.translate(e,...n))}}}}}translate(t,...e){var n,r,i;if(null==t)return"";let o=e[0];function s(){e.shift(),o=e[0]}if(-1!=this._list.indexOf(e[0])&&(i=o,s()),"boolean"==typeof o){let e=t.match(/\((.*?)\)/);e?(n=e[1].split("|"),r=o?t.replace(e[0],n[0].trim()):t.replace(e[0],n[1].trim())):(n=t.split("|"),r=o?n[0]:n[1]),s()}else r=t;let a=r.split("+"),c="";for(let t of a){let n,r;(n=/(.+)\.(.+)/.exec(t))&&(r=n[1],t=n[2]);let o=this.get(t.trim(),r,i);o&&(c+=this.format(o,r,i,...e)),c+=" "}return this.capitalizeFirstLetter(c.trim())}}return e=new i,String.prototype.t=function(...t){return e.translate(this,...t)},"undefined"!=typeof Handlebars&&e.load.Handlebars(Handlebars),"undefined"!=typeof angular&&e.load.Angular(angular),"undefined"!=typeof Vue&&Vue.use(e.load.Vue),e}();t.exports=r},function(t,e){t.exports=function(){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(t,e){return e};var e=new Error;Error.captureStackTrace(e,arguments.callee);var n=e.stack;return Error.prepareStackTrace=t,n}},function(t,e,n){const r=n(5);t.exports=class{constructor(t){this.address={},this._infoAddress={lock:{}},this.varFn={},this.magicVar={},this.variables={},this.id=t,this.lang=null,this._history=[],this._nlpCache={}}_createNamespace(t){this.address[t]||(this.address[t]=[]),this.variables[t]||(this.variables[t]={}),this.varFn[t]||(this.varFn[t]={})}addAddress(t,e){this._createNamespace(e),this.address[e].push(t)}getAddress(t){return this._createNamespace(t),r.last(this.address[t])}hasAddress(t){return this._createNamespace(t),this.address[t].length>0}clearAddress(t){this._createNamespace(t),this.address[t]=[]}popAddress(t){this._createNamespace(t),this.address[t].pop()}garbage(t,e){this._createNamespace(e),delete this.varFn[e][t]}hasLockAddressStack(t){return!!this._infoAddress.lock[t]}lockAddressStack(t,e){this._infoAddress.lock[t]=e}unlockAddressStack(t,e){this._infoAddress.lock[t]===e&&delete this._infoAddress.lock[t]}addressStackIslocked(t){return this._infoAddress.lock[t]}getVariables(t){return this._createNamespace(t),this.variables[t]}getVariable(t,e){return e=e.replace(/^\$/,""),this._createNamespace(t),this.variables[t][e]}setVariable(t,e,n){e=e.replace(/^\$/,""),this._createNamespace(t),this.variables[t][e]=n}getVariableInFonction(t,e,n){return this._createNamespace(t),this.varFn[t][e]||(this.varFn[t][e]={}),n?this.varFn[t][e][n]:this.varFn[t][e]}setVariableInFonction(t,e,n,r){return this._createNamespace(t),this.varFn[t][e]||(this.varFn[t][e]={}),this.varFn[t][e][n]=r}getMagicVariable(t){return this.magicVar[t]}setMagicVariable(t,e){this.magicVar[t]=e}saveSession(t){this.session=t}retrieveSession(){return this.session}setLang(t){this.lang=t}getLang(){return this.lang}addHistory(t){this._history.push(t)}resetHistory(t){this._history=[]}toJson(){return{_current:{_address:this.address,_var:this.varFn,_magicVar:this.magicVar,_infoAddress:this._infoAddress},_session:this.session,data:this.variables,lang:this.lang,id:this.id}}fromJson(t){return this.address=t._current._address||{},this._infoAddress=t._current._infoAddress||{lock:{}},this.varFn=t._current._var||{},this.magicVar=t._current._magicVar||{},this.session=t._session||{},this.variables=t.data||{},this.lang=t.lang,this.id=t.id,this}}},function(t,e,n){(function(e){const r=n(5),i=n(23),o=n(38);let s;s=i.is()?window.newbotParser:e.newbotParser,"undefined"!=typeof window&&(window._=r);t.exports=class{constructor(t,e){this.variables={},this._script=t,this.namespace=e,this.parser=s}run(t){if(i.is()&&!this.parser)throw'You can not use the parser. Integrate rather the "newbot.with-parser.min.js" file';try{return this.parser.parse(this._script)}catch(e){new o(this._script,this.namespace,t).syntax(e)}}line(t){return t=t.trim(),this.parser.parse(t)}isVariable(){}}}).call(this,n(7))},function(t,e,n){var r,i,o,s,a;r=n(195),i=n(73).utf8,o=n(196),s=n(73).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var n=r.bytesToWords(t),c=8*t.length,u=1732584193,l=-271733879,f=-1732584194,h=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var d=a._ff,v=a._gg,g=a._hh,m=a._ii;for(p=0;p<n.length;p+=16){var y=u,b=l,x=f,_=h;u=d(u,l,f,h,n[p+0],7,-680876936),h=d(h,u,l,f,n[p+1],12,-389564586),f=d(f,h,u,l,n[p+2],17,606105819),l=d(l,f,h,u,n[p+3],22,-1044525330),u=d(u,l,f,h,n[p+4],7,-176418897),h=d(h,u,l,f,n[p+5],12,1200080426),f=d(f,h,u,l,n[p+6],17,-1473231341),l=d(l,f,h,u,n[p+7],22,-45705983),u=d(u,l,f,h,n[p+8],7,1770035416),h=d(h,u,l,f,n[p+9],12,-1958414417),f=d(f,h,u,l,n[p+10],17,-42063),l=d(l,f,h,u,n[p+11],22,-1990404162),u=d(u,l,f,h,n[p+12],7,1804603682),h=d(h,u,l,f,n[p+13],12,-40341101),f=d(f,h,u,l,n[p+14],17,-1502002290),u=v(u,l=d(l,f,h,u,n[p+15],22,1236535329),f,h,n[p+1],5,-165796510),h=v(h,u,l,f,n[p+6],9,-1069501632),f=v(f,h,u,l,n[p+11],14,643717713),l=v(l,f,h,u,n[p+0],20,-373897302),u=v(u,l,f,h,n[p+5],5,-701558691),h=v(h,u,l,f,n[p+10],9,38016083),f=v(f,h,u,l,n[p+15],14,-660478335),l=v(l,f,h,u,n[p+4],20,-405537848),u=v(u,l,f,h,n[p+9],5,568446438),h=v(h,u,l,f,n[p+14],9,-1019803690),f=v(f,h,u,l,n[p+3],14,-187363961),l=v(l,f,h,u,n[p+8],20,1163531501),u=v(u,l,f,h,n[p+13],5,-1444681467),h=v(h,u,l,f,n[p+2],9,-51403784),f=v(f,h,u,l,n[p+7],14,1735328473),u=g(u,l=v(l,f,h,u,n[p+12],20,-1926607734),f,h,n[p+5],4,-378558),h=g(h,u,l,f,n[p+8],11,-2022574463),f=g(f,h,u,l,n[p+11],16,1839030562),l=g(l,f,h,u,n[p+14],23,-35309556),u=g(u,l,f,h,n[p+1],4,-1530992060),h=g(h,u,l,f,n[p+4],11,1272893353),f=g(f,h,u,l,n[p+7],16,-155497632),l=g(l,f,h,u,n[p+10],23,-1094730640),u=g(u,l,f,h,n[p+13],4,681279174),h=g(h,u,l,f,n[p+0],11,-358537222),f=g(f,h,u,l,n[p+3],16,-722521979),l=g(l,f,h,u,n[p+6],23,76029189),u=g(u,l,f,h,n[p+9],4,-640364487),h=g(h,u,l,f,n[p+12],11,-421815835),f=g(f,h,u,l,n[p+15],16,530742520),u=m(u,l=g(l,f,h,u,n[p+2],23,-995338651),f,h,n[p+0],6,-198630844),h=m(h,u,l,f,n[p+7],10,1126891415),f=m(f,h,u,l,n[p+14],15,-1416354905),l=m(l,f,h,u,n[p+5],21,-57434055),u=m(u,l,f,h,n[p+12],6,1700485571),h=m(h,u,l,f,n[p+3],10,-1894986606),f=m(f,h,u,l,n[p+10],15,-1051523),l=m(l,f,h,u,n[p+1],21,-2054922799),u=m(u,l,f,h,n[p+8],6,1873313359),h=m(h,u,l,f,n[p+15],10,-30611744),f=m(f,h,u,l,n[p+6],15,-1560198380),l=m(l,f,h,u,n[p+13],21,1309151649),u=m(u,l,f,h,n[p+4],6,-145523070),h=m(h,u,l,f,n[p+11],10,-1120210379),f=m(f,h,u,l,n[p+2],15,718787259),l=m(l,f,h,u,n[p+9],21,-343485551),u=u+y>>>0,l=l+b>>>0,f=f+x>>>0,h=h+_>>>0}return r.endian([u,l,f,h])})._ff=function(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._gg=function(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._hh=function(t,e,n,r,i,o,s){var a=t+(e^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._ii=function(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?s.bytesToString(n):r.bytesToHex(n)}},function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?e.push(n.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){!function(n){"use strict";var r=function(t,e){var n=new Error(t+" at character "+e);throw n.index=e,n.description=t,n},i={"-":!0,"!":!0,"~":!0,"+":!0},o={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},s=function(t){var e,n=0;for(var r in t)(e=r.length)>n&&t.hasOwnProperty(r)&&(n=e);return n},a=s(i),c=s(o),u={true:!0,false:!1,null:null},l=function(t){return o[t]||0},f=function(t,e,n){return{type:"||"===t||"&&"===t?"LogicalExpression":"BinaryExpression",operator:t,left:e,right:n}},h=function(t){return t>=48&&t<=57},p=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=128&&!o[String.fromCharCode(t)]},d=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t>=128&&!o[String.fromCharCode(t)]},v=function(t){for(var e,n,s=0,v=t.charAt,g=t.charCodeAt,m=function(e){return v.call(t,e)},y=function(e){return g.call(t,e)},b=t.length,x=function(){for(var t=y(s);32===t||9===t||10===t||13===t;)t=y(++s)},_=function(){var t,e,n=j();return x(),63!==y(s)?n:(s++,(t=_())||r("Expected expression",s),x(),58===y(s)?(s++,(e=_())||r("Expected expression",s),{type:"ConditionalExpression",test:n,consequent:t,alternate:e}):void r("Expected :",s))},w=function(){x();for(var e=t.substr(s,c),n=e.length;n>0;){if(o.hasOwnProperty(e)&&(!p(y(s))||s+e.length<t.length&&!d(y(s+e.length))))return s+=n,e;e=e.substr(0,--n)}return!1},j=function(){var t,e,n,i,o,a,c,u;if(a=k(),!(e=w()))return a;for(o={value:e,prec:l(e)},(c=k())||r("Expected expression after "+e,s),i=[a,o,c];(e=w())&&0!==(n=l(e));){for(o={value:e,prec:n};i.length>2&&n<=i[i.length-2].prec;)c=i.pop(),e=i.pop().value,a=i.pop(),t=f(e,a,c),i.push(t);(t=k())||r("Expected expression after "+e,s),i.push(o,t)}for(t=i[u=i.length-1];u>1;)t=f(i[u-1].value,i[u-2],t),u-=2;return t},k=function(){var e,n,r;if(x(),e=y(s),h(e)||46===e)return O();if(39===e||34===e)return S();if(91===e)return I();for(r=(n=t.substr(s,a)).length;r>0;){if(i.hasOwnProperty(n)&&(!p(y(s))||s+n.length<t.length&&!d(y(s+n.length))))return s+=r,{type:"UnaryExpression",operator:n,argument:k(),prefix:!0};n=n.substr(0,--r)}return!(!p(e)&&40!==e)&&P()},O=function(){for(var t,e,n="";h(y(s));)n+=m(s++);if(46===y(s))for(n+=m(s++);h(y(s));)n+=m(s++);if("e"===(t=m(s))||"E"===t){for(n+=m(s++),"+"!==(t=m(s))&&"-"!==t||(n+=m(s++));h(y(s));)n+=m(s++);h(y(s-1))||r("Expected exponent ("+n+m(s)+")",s)}return e=y(s),p(e)?r("Variable names cannot start with a number ("+n+m(s)+")",s):46===e&&r("Unexpected period",s),{type:"Literal",value:parseFloat(n),raw:n}},S=function(){for(var t,e="",n=m(s++),i=!1;s<b;){if((t=m(s++))===n){i=!0;break}if("\\"===t)switch(t=m(s++)){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return i||r('Unclosed quote after "'+e+'"',s),{type:"Literal",value:e,raw:n+e+n}},A=function(){var e,n=y(s),i=s;for(p(n)?s++:r("Unexpected "+m(s),s);s<b&&(n=y(s),d(n));)s++;return e=t.slice(i,s),u.hasOwnProperty(e)?{type:"Literal",value:u[e],raw:e}:"this"===e?{type:"ThisExpression"}:{type:"Identifier",name:e}},E=function(t){for(var e,n,i=[],o=!1;s<b;){if(x(),(e=y(s))===t){o=!0,s++;break}44===e?s++:((n=_())&&"Compound"!==n.type||r("Expected comma",s),i.push(n))}return o||r("Expected "+String.fromCharCode(t),s),i},P=function(){var t,e;for(e=40===(t=y(s))?T():A(),x(),t=y(s);46===t||91===t||40===t;)s++,46===t?(x(),e={type:"MemberExpression",computed:!1,object:e,property:A()}):91===t?(e={type:"MemberExpression",computed:!0,object:e,property:_()},x(),93!==(t=y(s))&&r("Unclosed [",s),s++):40===t&&(e={type:"CallExpression",arguments:E(41),callee:e}),x(),t=y(s);return e},T=function(){s++;var t=_();if(x(),41===y(s))return s++,t;r("Unclosed (",s)},I=function(){return s++,{type:"ArrayExpression",elements:E(93)}},F=[];s<b;)59===(e=y(s))||44===e?s++:(n=_())?F.push(n):s<b&&r('Unexpected "'+m(s)+'"',s);return 1===F.length?F[0]:{type:"Compound",body:F}};v.version="0.3.4",v.toString=function(){return"JavaScript Expression Parser (JSEP) v"+v.version},v.addUnaryOp=function(t){return a=Math.max(t.length,a),i[t]=!0,this},v.addBinaryOp=function(t,e){return c=Math.max(t.length,c),o[t]=e,this},v.addLiteral=function(t,e){return u[t]=e,this},v.removeUnaryOp=function(t){return delete i[t],t.length===a&&(a=s(i)),this},v.removeAllUnaryOps=function(){return i={},a=0,this},v.removeBinaryOp=function(t){return delete o[t],t.length===c&&(c=s(o)),this},v.removeAllBinaryOps=function(){return o={},c=0,this},v.removeLiteral=function(t){return delete u[t],this},v.removeAllLiterals=function(){return u={},this},t.exports?e=t.exports=v:e.parse=v}()},function(t,e){t.exports=new class{async map(t,e){for(let n=0;n<t.length;n++)t[n]=await e(t[n]);return t}}},function(t,e,n){(function(e){var r=n(200);t.exports=function(t,n,i,o){if(!n.global)return function(t,e,n,r){var i=t.match(e);if(!i)return r(null,t);var o=i.slice();o.push(i.index),o.push(i.input),o.push(function(n,i){if(n)return r(n);r(null,t.replace(e,i))}),n.apply(null,o)}(t,n,i,o);var s=t.match(n);if(s){var a=[],c=0,u=0,l=function(t){var e="";return t.ignoreCase&&(e+="i"),new RegExp(t.source,e)}(n);l.global=!1;for(var f=[];s.length>0;){var h=s.shift(),p=t.indexOf(h,u);a[c]=t.slice(u,p),function(e,n,r){f.push(function(o){var s=r.match(l).slice();s.push(n),s.push(t),s.push(function(t,n){if(t)return o(t);a[e]=n,o(null)}),i.apply(null,s)})}(++c,p,h),u=p+h.length,c++}a[c]=t.slice(u),r.parallel(f,function(t){if(t)return o(t);o(null,a.join(""))})}else e.nextTick(o.bind(this,null,t))}}).call(this,n(19))},function(t,e,n){(function(n,r,i){var o;
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){var s,a={};function c(){}function u(t){return t}function l(t){return!!t}function f(t){return!t}var h="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;function p(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function d(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=h&&(s=h.async),a.noConflict=function(){return h.async=s,a};var v=Object.prototype.toString,g=Array.isArray||function(t){return"[object Array]"===v.call(t)};function m(t){return g(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function y(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function b(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function x(t){return b(Array(t),function(t,e){return e})}function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var w=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function j(t){var e,n,r=-1;return m(t)?(e=t.length,function(){return++r<e?r:null}):(n=w(t),e=n.length,function(){return++r<e?n[r]:null})}function k(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function O(t){return function(e,n,r){return t(e,r)}}var S="function"==typeof r&&r,A=S?function(t){S(t)}:function(t){setTimeout(t,0)};function E(t){return function(e,n,r){r=d(r||c);var i=j(e=e||[]);if(t<=0)return r(null);var o=!1,s=0,a=!1;!function c(){if(o&&s<=0)return r(null);for(;s<t&&!a;){var u=i();if(null===u)return o=!0,void(s<=0&&r(null));s+=1,n(e[u],u,p(function(t){s-=1,t?(r(t),a=!0):c()}))}}()}}function P(t){return function(e,n,r){return t(a.eachOf,e,n,r)}}function T(t){return function(e,n,r,i){return t(E(n),e,r,i)}}function I(t){return function(e,n,r){return t(a.eachOfSeries,e,n,r)}}function F(t,e,n,r){r=d(r||c);var i=m(e=e||[])?[]:{};t(e,function(t,e,r){n(t,function(t,n){i[e]=n,r(t)})},function(t){r(t,i)})}function V(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(b(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function N(t,e,n,r){V(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function L(t,e,n){return function(r,i,o,s){function a(){s&&s(n(!1,void 0))}function c(t,r,i){if(!s)return i();o(t,function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()})}arguments.length>3?t(r,i,c,a):(s=o,o=i,t(r,c,a))}}function M(t,e){return e}function $(t,e,n){n=n||c;var r=m(e)?[]:{};t(e,function(t,e,n){t(k(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function U(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function B(t,e,n){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");function r(t,e,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(t.started=!0,g(e)||(e=[e]),0===e.length&&t.idle())return a.setImmediate(function(){t.drain()});y(e,function(e){var i={data:e,callback:r||c};n?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),a.setImmediate(t.process)}function i(t,e){return function(){o-=1;var n=!1,r=arguments;y(e,function(t){y(s,function(e,r){e!==t||n||(s.splice(r,1),n=!0)}),t.callback.apply(t,r)}),t.tasks.length+o===0&&t.drain(),t.process()}}var o=0,s=[],u={tasks:[],concurrency:e,payload:n,saturated:c,empty:c,drain:c,started:!1,paused:!1,push:function(t,e){r(u,t,!1,e)},kill:function(){u.drain=c,u.tasks=[]},unshift:function(t,e){r(u,t,!0,e)},process:function(){for(;!u.paused&&o<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=b(e,function(t){return t.data});0===u.tasks.length&&u.empty(),o+=1,s.push(e[0]);var r=p(i(u,e));t(n,r)}},length:function(){return u.tasks.length},running:function(){return o},workersList:function(){return s},idle:function(){return u.tasks.length+o===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;e<=t;e++)a.setImmediate(u.process)}}};return u}function C(t){return k(function(e,n){e.apply(null,n.concat([k(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&y(n,function(e){console[t](e)}))})]))})}function z(t){return function(e,n,r){t(x(e),n,r)}}function D(t){return k(function(e,n){var r=k(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function R(t){return k(function(e){var n=e.pop();e.push(function(){var t=arguments;r?a.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}"object"==typeof i&&"function"==typeof i.nextTick?a.nextTick=i.nextTick:a.nextTick=A,a.setImmediate=S?A:a.nextTick,a.forEach=a.each=function(t,e,n){return a.eachOf(t,O(e),n)},a.forEachSeries=a.eachSeries=function(t,e,n){return a.eachOfSeries(t,O(e),n)},a.forEachLimit=a.eachLimit=function(t,e,n,r){return E(e)(t,O(n),r)},a.forEachOf=a.eachOf=function(t,e,n){n=d(n||c);for(var r,i=j(t=t||[]),o=0;null!=(r=i());)o+=1,e(t[r],r,p(s));function s(t){o--,t?n(t):null===r&&o<=0&&n(null)}0===o&&n(null)},a.forEachOfSeries=a.eachOfSeries=function(t,e,n){n=d(n||c);var r=j(t=t||[]),i=r();!function o(){var s=!0;if(null===i)return n(null);e(t[i],i,p(function(t){if(t)n(t);else{if(null===(i=r()))return n(null);s?a.setImmediate(o):o()}})),s=!1}()},a.forEachOfLimit=a.eachOfLimit=function(t,e,n,r){E(e)(t,n,r)},a.map=P(F),a.mapSeries=I(F),a.mapLimit=T(F),a.inject=a.foldl=a.reduce=function(t,e,n,r){a.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t,e)})},a.foldr=a.reduceRight=function(t,e,n,r){var i=b(t,u).reverse();a.reduce(i,e,n,r)},a.transform=function(t,e,n,r){3===arguments.length&&(r=n,n=e,e=g(t)?[]:{}),a.eachOf(t,function(t,r,i){n(e,t,r,i)},function(t){r(t,e)})},a.select=a.filter=P(V),a.selectLimit=a.filterLimit=T(V),a.selectSeries=a.filterSeries=I(V),a.reject=P(N),a.rejectLimit=T(N),a.rejectSeries=I(N),a.any=a.some=L(a.eachOf,l,u),a.someLimit=L(a.eachOfLimit,l,u),a.all=a.every=L(a.eachOf,f,f),a.everyLimit=L(a.eachOfLimit,f,f),a.detect=L(a.eachOf,u,M),a.detectSeries=L(a.eachOfSeries,u,M),a.detectLimit=L(a.eachOfLimit,u,M),a.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}a.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,b(e.sort(r),function(t){return t.value}))})},a.auto=function(t,e,n){"function"==typeof arguments[1]&&(n=e,e=null),n=d(n||c);var r=w(t),i=r.length;if(!i)return n(null);e||(e=i);var o={},s=0,u=!1,l=[];function f(t){l.unshift(t)}function h(){i--,y(l.slice(0),function(t){t()})}f(function(){i||n(null,o)}),y(r,function(r){if(!u){for(var i,c=g(t[r])?t[r]:[t[r]],p=k(function(t,e){if(s--,e.length<=1&&(e=e[0]),t){var i={};l=function(t,e){i[e]=t},y(w(c=o),function(t){l(c[t],t)}),i[r]=e,u=!0,n(t,i)}else o[r]=e,a.setImmediate(h);var c,l}),d=c.slice(0,c.length-1),v=d.length;v--;){if(!(i=t[d[v]]))throw new Error("Has nonexistent dependency in "+d.join(", "));if(g(i)&&_(i,r)>=0)throw new Error("Has cyclic dependencies")}m()?(s++,c[c.length-1](p,o)):f(function t(){m()&&(s++,(e=_(l,t))>=0&&l.splice(e,1),c[c.length-1](p,o));var e})}function m(){return s<e&&(t=function(t,e){return t&&o.hasOwnProperty(e)},n=!0,y(d,function(e,r,i){n=t(n,e,r,i)}),n)&&!o.hasOwnProperty(r);var t,n}})},a.retry=function(t,e,n){var r=5,i=0,o=[],s={times:r,interval:i};var c=arguments.length;if(c<1||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function u(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;s.times;){var i=!(s.times-=1);o.push(n(s.task,i)),!i&&s.interval>0&&o.push(r(s.interval))}a.series(o,function(e,n){n=n[n.length-1],(t||s.callback)(n.err,n.result)})}return c<=2&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||r;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||r,t.interval=parseInt(e.interval,10)||i}}(s,t),s.callback=n,s.task=e,s.callback?u():u},a.waterfall=function(t,e){if(e=d(e||c),!g(t)){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();!function t(n){return k(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=n.next();o?i.push(t(o)):i.push(e),R(n).apply(null,i)}})}(a.iterator(t))()},a.parallel=function(t,e){$(a.eachOf,t,e)},a.parallelLimit=function(t,e,n){$(E(e),t,n)},a.series=function(t,e){$(a.eachOfSeries,t,e)},a.iterator=function(t){return function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}(0)},a.apply=k(function(t,e){return k(function(n){return t.apply(null,e.concat(n))})}),a.concat=P(U),a.concatSeries=I(U),a.whilst=function(t,e,n){if(n=n||c,t()){var r=k(function(i,o){i?n(i):t.apply(this,o)?e(r):n.apply(null,[null].concat(o))});e(r)}else n(null)},a.doWhilst=function(t,e,n){var r=0;return a.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},a.until=function(t,e,n){return a.whilst(function(){return!t.apply(this,arguments)},e,n)},a.doUntil=function(t,e,n){return a.doWhilst(t,function(){return!e.apply(this,arguments)},n)},a.during=function(t,e,n){n=n||c;var r=k(function(e,r){e?n(e):(r.push(i),t.apply(this,r))}),i=function(t,i){t?n(t):i?e(r):n(null)};t(i)},a.doDuring=function(t,e,n){var r=0;a.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},a.queue=function(t,e){return B(function(e,n){t(e[0],n)},e,1)},a.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}var r=a.queue(t,e);return r.push=function(t,e,i){!function(t,e,r,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(t.started=!0,g(e)||(e=[e]),0===e.length)return a.setImmediate(function(){t.drain()});y(e,function(e){var o={data:e,priority:r,callback:"function"==typeof i?i:c};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}(t.tasks,o,n)+1,0,o),t.tasks.length===t.concurrency&&t.saturated(),a.setImmediate(t.process)})}(r,t,e,i)},delete r.unshift,r},a.cargo=function(t,e){return B(t,1,e)},a.log=C("log"),a.dir=C("dir"),a.memoize=function(t,e){var n={},r={},i=Object.prototype.hasOwnProperty;e=e||u;var o=k(function(o){var s=o.pop(),c=e.apply(null,o);i.call(n,c)?a.setImmediate(function(){s.apply(null,n[c])}):i.call(r,c)?r[c].push(s):(r[c]=[s],t.apply(null,o.concat([k(function(t){n[c]=t;var e=r[c];delete r[c];for(var i=0,o=e.length;i<o;i++)e[i].apply(null,t)})])))});return o.memo=n,o.unmemoized=t,o},a.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},a.times=z(a.map),a.timesSeries=z(a.mapSeries),a.timesLimit=function(t,e,n,r){return a.mapLimit(x(t),e,n,r)},a.seq=function(){var t=arguments;return k(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=c,a.reduce(t,e,function(t,e,r){e.apply(n,t.concat([k(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},a.compose=function(){return a.seq.apply(null,Array.prototype.reverse.call(arguments))},a.applyEach=D(a.eachOf),a.applyEachSeries=D(a.eachOfSeries),a.forever=function(t,e){var n=p(e||c),r=R(t);!function t(e){if(e)return n(e);r(t)}()},a.ensureAsync=R,a.constant=k(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),a.wrapSync=a.asyncify=function(t){return k(function(e){var n,r,i,o=e.pop();try{n=t.apply(this,e)}catch(t){return o(t)}("function"===(i=typeof(r=n))||"object"===i&&r)&&"function"==typeof n.then?n.then(function(t){o(null,t)}).catch(function(t){o(t.message?t:new Error(t))}):o(null,n)})},t.exports?t.exports=a:void 0===(o=function(){return a}.apply(e,[]))||(t.exports=o)}()}).call(this,n(7),n(201).setImmediate,n(19))},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(202),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(7))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,s,a,c=1,u={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[c]=i,r(c),c++},h.clearImmediate=p}function p(t){delete u[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(7),n(19))},function(t,e,n){const r=n(204),i=n(38),o=n(5);t.exports=class{constructor(t){this.decorators={},this.interpreter=t,this.error=new i(this.interpreter.converse.script,this.interpreter.namespace);for(let t in r)this.decorators[t]=[]}add(t){if(!t.decorators)return;const{decorators:e,name:n}=t;let i=[];for(let o of e)this.decorators[o.name]||this.error.throw(t,"decorator.error",new Error(`Decorator "${o.name}" not exists`)),i.push(new r[o.name](o,n));for(let t of i){for(let e of i)t.name!=e.name&&(t.otherDecorators[e.name]||(t.otherDecorators[e.name]=[]),t.otherDecorators[e.name].push(e));this.decorators[t.name].push(t)}}get(t,e){let n=this.decorators[t],r=[];if(0===n.length)return[];o.isArray(e)||(e=[e]);for(let t of n)(o.isUndefined(e[0])||t.findParam(e))&&r.push(t);return r}async _exec(t,e,n){let r=!1;const i=async t=>{if(t.otherDecorators.Condition)for(let n of t.otherDecorators.Condition)if(!await n.run(e))return!1;r=!0;let n=this.interpreter.fn[t.fnName];return e.execFn(n,0,()=>e.end()),!0};for(let o of t){let t=null;if(n&&o[n]&&(t=o[n](e)),t instanceof Promise){if(await t&&!r&&await i(o))break}else if(await i(o))break}return r}async execMethod(t,e,n){const r=this.decorators[t];return await this._exec(r,n,e)}async exec(t,e,n){return o.isArray(t)||(t=this.get(t,n)),!!t&&await this._exec(t,e)}}},function(t,e,n){const r=n(205),i=n(206),o=n(207),s=n(208);t.exports={Event:r,Intent:i,Action:o,Condition:s}},function(t,e,n){const r=n(20);t.exports=class extends r{start(){return"start"==this.params[0]}nothing(){return"nothing"==this.params[0]}}},function(t,e,n){const r=n(20),i=n(5);t.exports=class extends r{run(t){return new Promise((e,n)=>{const{intents:r}=t;if(this.instructions&&this.instructions.length>0)return void t.execBlock({instructions:this.instructions},0,"test",()=>{e(!0)});if(!r)return e(!1);const o=this.params[0];let s=r[o];return o.regexp&&new RegExp(o.regexp,o.flags.join("")).test(t.input)?e(!0):(i.isFunction(s)&&(s=s()),s?(t.setMagicVar("intent",s),e(!0)):void e(!1))})}}},function(t,e,n){const r=n(20);t.exports=class extends r{}},function(t,e,n){const r=n(20);t.exports=class extends r{run(t){return new Promise(async(e,n)=>{const{converse:r,user:i,options:o}=t;for(let t of this.params){let s=r._conditions[t];if(!s)return void n(new Error(`${t} condition function not exists`));let a=s(o.data,i);if(a instanceof Promise&&(a=await a),!a)return void e(!1)}e(!0)})}}},function(t,e,n){const r=n(210),i=n(211),o=n(212),s=n(213),a=n(214),c=n(215);t.exports={Users:r,Array:i,Lang:o,Utils:s,Eval:a,debugger:c}},function(t,e){const n={$params:["users"],nbUsers:t=>t.size,sum(t,e){let n=0;for(let[,r]of e)n+=+r.getVariable(this.namespace,t);return n},avg(t,e){return this.sum(t,e)/this.nbUsers(e)}};t.exports=n},function(t,e){const n={length:t=>t.length,push:(t,e)=>t.push(e),pushOnlyUniq(t,e){return-1===t.indexOf(e)?this.push(t,e):t},indexOf:(t,e)=>t.indexOf(e)};t.exports=n},function(t,e){const n={fr_FR:["Franais","French"],en_EN:["English","English"]},r={$params:["user"],set(t,e){t&&e.setLang(t)},name(t){const e=t.getLang();return n[e][0]}};t.exports=r},function(t,e){const n={uniqid:()=>(new Date).valueOf().toString(36)+Math.random().toString(36).substr(2)};t.exports=n},function(t,e,n){const r=n(72),i={$params:["users","execution"],json(t,e,n){try{const{converse:i,user:o,_input:s,options:a,propagate:c}=n,u=JSON.parse(t);return new r(u,e,n.converse).exec(o,s,a,c)}catch(t){console.log(t)}}};t.exports=i},function(t,e){const n={$params:["user","execution","level"],$call(t,e,n){const{namespace:r}=e,i=(t,e)=>{console.log(`--- ${e} ---`);for(let e in t)console.log(`\n * ${e} = `,JSON.stringify(t[e],null,2));console.log("\n")};console.log("* Skill : "+r),console.log("* User Id : "+t.id),console.log("* Current Lang : "+t.lang),i(t.variables[r],"global variables"),i(t.magicVar,"magic variables"),i(t.varFn[r][n],`${n}(...) function`)}};t.exports=n},function(t,e){t.exports=class{constructor(t,e){this.script=t,this.history=e}organize(){this.script.split("\n"),console.log(this.history[0]._file)}display(){const t=this.organize();console.log("--- %s ---",DEBUG);for(let e of t)console.log(e);console.log("------")}}},function(t,e,n){const r=n(5);t.exports=class{constructor(t,e,n={}){this.name=t,this.converse=e,this.options=n,this.uuid=n.uuid,this.priority=this.options.priority?this.options.priority:0,this.intents={}}add(t){r.isFunction(t)?this.intents=t:this.intents=r.merge(this.intents,t)}exec(t,e,n=this.converse){return new Promise((i,o)=>{if(n._mockNlp&&n._mockNlp[this.name]){const n=this.converse._mockNlp[this.name](t,e);i({structured:n})}else r.isFunction(this.intents)?this.intents(t,e,n).then(t=>{i({intents:t})}):i()}).then(({structured:r,intents:i}={})=>{i=i||this.intents;let o={};for(let s in i){let a=i[s],c="string"==typeof e?n._users.get(e):e,u=a(t,r,c);u&&(o[s]=u)}return o})}}},function(t,e,n){const r=n(71),i=n(23);t.exports=new class{readFile(t,e){return i.is()?new Promise((e,n)=>{const r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200==r.status?e(r.responseText):n(r))},r.open("GET",t,!0),r.send()}):new Promise((n,i)=>{r.readFile(t,e,(t,e)=>{if(t)return i(t);n(e)})})}}},function(t){t.exports={version:"0.2.0"}}]);