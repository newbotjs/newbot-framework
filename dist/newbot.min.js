!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=41)}([function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(47),i="object"==typeof self&&self&&self.Object===Object&&self,s=r||i||Function("return this")();t.exports=s},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var n=Array.isArray;t.exports=n},,function(t,e,n){var r=n(10),i=n(100),s=n(101),o=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):s(t)}},,function(t,e,n){const r=n(87),i=n(136),s=n(0),o=n(16),a=n(137),c=n(161),u=n(3),l=n(162),h=n(170),f=n(172),p=n(173),d=n(174),g=n(175),v=n(181),m=n(182),b=n(183),_=n(185),x=n(58),y=n(72);t.exports={merge:r,isString:i,isObjectLike:s,isPlainObject:x,isFunction:o,clone:a,cloneDeep:c,isArray:u,get:h,set:l,isUndefined:f,isNull:p,isBoolean:d,isNumber:y,random:g,last:v,flatten:b,isNaN:m,difference:_}},function(t,e,n){var r=n(99),i=n(104);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){(function(e){const r=n(7),i=n(197),s=n(198),o=n(201),a=n(84),c=n(74),u=n(213),l=(n(220),n(221)),h=n(222),f=n(76),p=n(23),d=n(224);class g{constructor(t={},{loadSkills:e,model:n,modelLangs:r}={}){this._nlp={},this.config={},this._format={},this._constants={},this._conditions={},this._canActivated=[],this._propagateNlp=null,this._dbHook={},this._hooks={},this.model=n,this.modelLangs=r,this._originNlpObject={},this.script="",this._obj=[],this._skills=new Map,this._users=new Map,this.namespace="default",this._functions=u,this.lang=s.instance();Object.keys(t).length>0&&this.loadOptions(t,e)}static get version(){return d.version}static loader({systemjs:t}){t.config({meta:{"*.converse":{loader:e+"/../loader/converse-loader.js"}}}),g.SystemJS=t}async loadNativeNlp(){return this.nlp("__native__",await g.nlpManager(this.model,this.modelLangs)),this}async setModelNlp(t,e,n){this.model=t,this.modelLangs=e,await this.loadNativeNlp(!0),this.propagateNlp("__native__"),n||(this._skills.clear(),await this.setSkills(this.options.skills))}async loadOptions(t,e=!0){if(this.options=t,r.isString(t)&&(t={file:t}),t.file&&this.file(t.file),t.code&&this.code(t.code),t.languages&&this.configure({languages:t.languages}),t.mergeMultiFormats&&this.configure({mergeMultiFormats:t.mergeMultiFormats}),t.nlp)for(let e in t.nlp)this.nlp(e,t.nlp[e]);if(!this.parent&&this.model&&await this.setModelNlp(this.model,this.modelLangs,!0),t.conditions&&this.conditions(t.conditions),t.functions&&this.functions(t.functions),t.constants&&this.constants(t.constants),t.formats)for(let e in t.formats)this.format(e,t.formats[e]);t.canActivated&&this.canActivated(t.canActivated),t.shareFormats&&this.shareFormats(),t.shareNlp&&this.shareNlp(),t.propagateNlp&&this.propagateNlp(t.propagateNlp),t.propagateFormats&&this.propagateFormats(),e&&t.skills&&await this.loadSkills(),this.load()}async loadSkills(){await this.setSkills(this.options.skills)}get users(){return this._users}configure(t){return this.config=r.merge(this.config,t),this}file(t){return this._file=t,this}code(t){return t.code?this.script=t.code:this.script=t,(t.compiled||r.isArray(this.script))&&(this._compiled=t.compiled||this.script),this}async open(){return this._file&&g.SystemJS&&this.code(await g.SystemJS.import(this._file)),this.script?this._compiled?this._obj=r.merge([],this._compiled):(this._transpiler=new a(this.script,this.namespace),this._obj=this._transpiler.run()):this._obj=[],this._interpreter=new c(this._obj,this.users,this),this}getCodeCompiled(){return this._obj}continue(t,e,n){return this.exec({type:"continue",data:t},e,n)}exec(t,e,n,i={globalNoExec:!0}){let s,a;if(!n){if(!p.is())throw"On NodeJS, you must give an identifier to the user. `.exec(input, userId, output)`";n=e,e="conversescript-user"}if(r.isObjectLike(t)||(t={text:t}),s=this._users.get(e),r.isFunction(n)&&(n={output:n}),s||(s=new o(e),this._users.set(e,s),i.start=!0),n.magicVariables)for(let t in n.magicVariables)s.setMagicVariable(t,n.magicVariables[t]);s.setMagicVariable("userId",e),s.resetHistory(),"continue"==t.type&&s.setMagicVariable("event",t.data);let c=this.open().then(()=>{if(n.preUser)return n.preUser(s,this)}).then(()=>{!this.parent&&n.debug&&n.debug("begin",{user:s,data:n.data})}).then(()=>this.propagateExec(t,e,n,i)).then(t=>{a=!!t,a=a||!a&&s.getAddress(this.namespace)});return c="event"!==t.type&&"continue"!==t.type?c.then(()=>a?this.execNlp(t,e):t):c.then(()=>t),c=c.then(async t=>{let e={};return a&&(e=await this._interpreter.exec(s,t,n,i),e&&(i.globalNoExec&=e.nothing)),e}).then(e=>(this.parent||(i.globalNoExec&&this._hooks.nothing&&this._hooks.nothing(t.text,{user:s},n.data),this._hooks.finished&&this._hooks.finished(t.text,{user:s,data:n.data}),n.debug&&n.debug("finish",{nothing:i.globalNoExec,user:s,data:n.data}),s._nlpCache={}),e)),c}propagateExec(t,e,n,i){const s=this._users.get(e);let o=r.clone(n),a=!0,c=Promise.resolve();return this._skills.forEach(n=>{r.isArray(n)||(n=[n]);for(let u=0;u<n.length;u++){let l=n[u];c=c.then((n=!1)=>new Promise((c,h)=>{if(n)return c(n);let p=Promise.resolve();if(this._canActivated.length>0&&!this._canActivated.includes(l.name)){l._canActivated=[...this._canActivated,...l._canActivated];for(let t of this._canActivated)this.name!=t&&l._skills.set(t,this._skills.get(t))}l._shareFormat&&(this._format=r.merge(l._format,this._format)),l._users=this._users,l._condition&&(p=l._condition(o.data,s),f(p)||(p=Promise.resolve(p))),p.then(n=>{if(s.setRealSkill(l.name,u),!1!==n)return l.exec(t,e,o,i).then((t={})=>{a&=t.noExec,c(!0===n)}).catch(h);c(!1)})}))}}),c.then(()=>a)}skills(){return this._skills}execNlp(t,e){t.intents={};const n=this.users.get(e);let i=Promise.resolve(),s=Object.keys(this._nlp).map(t=>this._nlp[t]);s=s.sort((t,e)=>(e.priority||0)-(t.priority||0));for(let o of s){const s=o.uuid;i=i.then(r=>{if("break"==r)return;const i=n._nlpCache[o.name];return i&&Object.is(i.object,this._originNlpObject[s])?i.result:o.exec(t.text,e,this)}).then(e=>{if(!e)return;n._nlpCache[o.name]={object:this._originNlpObject[s],result:e};const i=Object.keys(e).length;if(!r.isUndefined(o.priority)&&i>0)return t.intents=e,"break";t.intents=r.merge(t.intents,e)})}return i.then(()=>t)}event(t,...e){let n,i,s,o=Promise.resolve();switch(e.length){case 2:r.isArray(e[0])?i=e[0]:s=e[0],n=e[1];break;case 3:s=e[0],i=e[1],n=e[2];break;default:i=this.users}return i&&!r.isArray(i)&&(i=[i]),i.forEach(e=>{o=o.then(()=>(e.id&&(e=e.id),this.exec({type:"event",name:t,data:s},e,n)))}),o}saveSession(t,e){const n=this.users.get(e);if(!n)throw`Unable to save the user ${e} session because there is no exists`;return n.saveSession(t),this}format(t,e){return this._format[t]=e,this}functions(t){return this._functions=r.merge(this._functions,t),this}execFunction(t,e,n,i,{deep:s,data:o,execution:a,level:c,ins:u}){let l=t;if(s&&(l+="."+s),!this._functions[t])throw s.join(".")+"."+t+"() not exists";let h,{$call:f,$mock:p,$params:d}=this._functions[t];this._functions[t].namespace=this.namespace,f||(f=this._functions[t]),s&&s.length>0&&(f=r.get(f,s)),d&&(d=d.map(t=>{switch(t){case"users":return this.users;case"user":return i;case"data":return o;case"execution":return a;case"level":return c;case"ins":return u}return t}),e=e.concat(d));const g={users:this.users,user:i,data:o,execution:a,level:c,ins:u};return this.testing&&this._mock[l]?(h=this._mock[l].call(i,...e),p&&(s&&(p=r.get(p,s)),h=p.call(this._mock[l],h,...d))):(this._functions[t].converse=g,h=f.call(this._functions[t],...e)),n?h&&h.then?h.then(()=>{i.setMagicVariable("error",null),n()}).catch(t=>{i.setMagicVariable("error",t),n()}):void n(h):h}nlp(t,e,n){const r=Symbol();return this._originNlpObject[r]=e,this._nlp[t]||(this._nlp[t]=new l(t,this,{...n,uuid:r})),e&&this._nlp[t].add(e),this._nlp[t]}useNlp(t){return this.currentNlp=t,this}getCurrentNlp(){return this._nlp[this.currentNlp]}async loadLanguage(){if(!this.config.languages)return;const t=this.config.languages.path||"./languages";let{packages:e,default:n}=this.config.languages;r.isArray(e)?this.lang.init(e,t+"/"):(n||(n=Object.keys(e)[0]),this.lang.packages(e).default(n))}load(){return this.loadLanguage(),this}loadUsers(t){for(let e of t){let t=e.id||e._id,n=new o(t).fromJson(e);this.users.set(t,n)}}use(t){this._hooks=t}_findParentPath(){const t=stack(),n=e;for(let e of t){let t=e.getFileName(),r=i.dirname(t);if(r!==n&&!/testing$/.test(r))return r}}async openSkills(t){let e;p.is()||(e=await new Promise(async(t,e)=>{try{const e=await h.readFile(this.parentPath+"/package.json",{encoding:"utf-8"});t(JSON.parse(e))}catch(n){if(n)return"ENOENT"==n.code?t():e(n)}})),e&&e.converse&&e.converse.dependencies&&(this.setSkills(e.converse.dependencies),t&&t())}async skill(t,e=t){let n=e.skill||e;n.hasOwnProperty("default")&&(n=n.default);let i;if(r.isArray(n)){for(let e of n)await this.skill(t,e);return this}if(i=r.isString(n)?{code:n}:n,i.hasOwnProperty("default")&&(i=i.default),r.isFunction(i)){const t=e.params||[];i=r.isPlainObject(t)?i.call(i,t):i.apply(i,t),i.then&&(i=await i)}let s=i.skills;if(r.isPlainObject(i)&&(this._propagateNlp&&(i.propagateNlp=this._propagateNlp),this._propagateFormats&&(i.propagateFormats=!0),i=new g(i,{loadSkills:!1})),i.namespace=(this.namespace?this.namespace+"-":"")+t,i.parent=this,i.name=t,i._condition=e.condition,i._shareNlp&&(this._nlp=r.merge(this._nlp,i._nlp),i._nlp={}),this._propagateNlp){if(this.allPropagate)i._nlp=r.merge(this._nlp,i._nlp);else{let t={};for(let e of this._propagateNlp)t[e]=this._nlp[e];i._nlp=r.merge(t,i._nlp)}i._originNlpObject=r.merge(this._originNlpObject,i._originNlpObject)}if(this._propagateFormats&&(i._format=r.merge(this._format,i._format)),this._skills.has(t)){const e=this._skills.get(t);i=r.isArray(e)?[...e,i]:[e,i]}return this._skills.set(t,i),s&&await i.setSkills(s),this}async setSkills(t){for(let e in t)await this.skill(e,t[e]);return this}getSkill(t){return this._skills.get(t)}shareFormats(){this._shareFormat=!0}shareNlp(){this._shareNlp=!0}propagateNlp(t){return this._propagateNlp||(this._propagateNlp=[]),r.isArray(t)?(this._propagateNlp=[...this._propagateNlp,...t],this):r.isString(t)?(this._propagateNlp.push(t),this):!0===t?(this._propagateNlp=[...this._propagateNlp,...Object.keys(this._nlp)],this):this}get allPropagate(){return 0==this._propagateNlp.length}propagateFormats(){this._propagateFormats=!0}conditions(t){this._conditions=r.merge(this._conditions,t)}constants(t){this._constants=r.merge(this._constants,t)}canActivated(t){this._canActivated=t}getAllIntents(){let t=[],e=this.open().then(()=>{t=this._interpreter.decorators.get("Intent"),t=t.map(t=>(t._skill=this,t))});return this._skills.forEach(n=>{r.isArray(n)||(n=[n]);for(let r of n)e=e.then(()=>r.getAllIntents()).then(e=>t=t.concat(e))}),e.then(()=>t)}}t.exports=g}).call(this,"/")},function(t,e,n){var r=n(1).Symbol;t.exports=r},function(t,e,n){var r=n(34),i=n(26);t.exports=function(t,e,n,s){var o=!n;n||(n={});for(var a=-1,c=e.length;++a<c;){var u=e[a],l=s?s(n[u],t[u],u,n,t):void 0;void 0===l&&(l=t[u]),o?i(n,u,l):r(n,u,l)}return n}},function(t,e,n){var r=n(61),i=n(127),s=n(19);t.exports=function(t){return s(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(89),i=n(90),s=n(91),o=n(92),a=n(93);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=o,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(15);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(5),i=n(2);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(8)(Object,"create");t.exports=r},function(t,e,n){var r=n(113);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(16),i=n(57);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){const r=n(7);t.exports=class{constructor(t,e){this.decorator=t,this.otherDecorators={},this.name=this.decorator.name,this.instructions=t.instructions,this.params=t.params,this.fnName=e}findParam(t){return 0===r.difference(this.params,t).length}}},function(t,e){t.exports=new class{is(){return"undefined"!=typeof navigator}}},function(t,e,n){var r=n(8)(n(1),"Map");t.exports=r},function(t,e,n){var r=n(105),i=n(112),s=n(114),o=n(115),a=n(116);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=o,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(50);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(120);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(55)(Object.getPrototypeOf,Object);t.exports=r},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(122),i=n(0),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},function(t,e,n){(function(t){var r=n(1),i=n(123),s=e&&!e.nodeType&&e,o=s&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===s?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;t.exports=c}).call(this,n(27)(t))},function(t,e,n){(function(t){var r=n(47),i=e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=s&&s.exports===i&&r.process,a=function(){try{var t=s&&s.require&&s.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a}).call(this,n(27)(t))},function(t,e,n){var r=n(26),i=n(15),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];s.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(61),i=n(140),s=n(19);t.exports=function(t){return s(t)?r(t):i(t)}},function(t,e,n){var r=n(144),i=n(66),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(t){return null==t?[]:(t=Object(t),r(o(t),(function(e){return s.call(t,e)})))}:i;t.exports=a},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(148),i=n(24),s=n(149),o=n(150),a=n(151),c=n(5),u=n(48),l=u(r),h=u(i),f=u(s),p=u(o),d=u(a),g=c;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||s&&"[object Promise]"!=g(s.resolve())||o&&"[object Set]"!=g(new o)||a&&"[object WeakMap]"!=g(new a))&&(g=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,r=n?u(n):"";if(r)switch(r){case l:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=g},function(t,e){const n={"variable.not.defined":["ReferenceError",t=>t.variable+" is not defined"],"function.not.defined":["ReferenceError",t=>t.name+"(...) function is not defined"],"arithmetic.error":["ArithmeticError",(t,e)=>"Expression is not correct. "+e.message],"type.error":["TypeError",(t,e)=>"Type is not correct. "+e.message]};t.exports=class{constructor(t,e,n){this.script=t,this.namespace=e,this.reject=n}throw(t,e,r){let i,s,o;if(!t)throw r;if(n[e]?(s=n[e][0],o=n[e][1]):(s="InternalError",o=()=>r.message),o=o(t,r),t._file){let{line:e,column:n}=t._file.start;i=this.makeError(s,o,{line:e,column:n})}else i=new Error(o);if(this.reject)return i;throw i}syntax(t){if(!t.location)throw t;const{line:e,column:n}=t.location.start,r=this.makeError("syntax","Syntax Error:"+t.message,{line:e,column:n});if(!this.reject)throw r;this.reject(r)}makeError(t,e,n){var r,i=n.line,s=n.column,o=(n.filename,this.script||n.src),a=i+(s?":"+s:"");const c=this.namespace?this.namespace.split("-").join(" / "):"unknow",u=`Skill : ${c}. Line ${i}`;if(o&&i>=1&&i<=o.split("\n").length){var l=o.split("\n"),h=Math.max(i-3,0),f=Math.min(l.length,i+3);r=u+"\n\n"+l.slice(h,f).map((function(t,e){var n=e+h+1,r=(n==i?"  > ":"    ")+n+"| ",o=r+t;return n===i&&s>0&&(o+="\n",o+=Array(r.length+s).join("-")+"^"),o})).join("\n")+"\n\n"+e}else r=u+":"+a+"\n\n"+e;const p=new Error(r);return p.skill=c,p.line=i,p.column=s,p}}},function(t,e,n){"use strict";n.r(e),n.d(e,"NewBot",(function(){return s}));var r=n(9),i=n.n(r);let s;n.d(e,"Converse",(function(){return i.a})),"undefined"!=typeof window&&(window.Converse=i.a,window.NewBot=i.a),s=i.a},function(t,e){var n,r,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,,,function(t,e,n){var r=n(13),i=n(94),s=n(95),o=n(96),a=n(97),c=n(98);function u(t){var e=this.__data__=new r(t);this.size=e.size}u.prototype.clear=i,u.prototype.delete=s,u.prototype.get=o,u.prototype.has=a,u.prototype.set=c,t.exports=u},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(78))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(26),i=n(15);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e,n){var r=n(8),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){(function(t){var r=n(1),i=e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=s&&s.exports===i?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(27)(t))},function(t,e,n){var r=n(28);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(121),i=n(29),s=n(30);t.exports=function(t){return"function"!=typeof t.constructor||s(t)?{}:r(i(t))}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(19),i=n(0);t.exports=function(t){return i(t)&&r(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){var r=n(5),i=n(29),s=n(0),o=Function.prototype,a=Object.prototype,c=o.toString,u=a.hasOwnProperty,l=c.call(Object);t.exports=function(t){if(!s(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},function(t,e,n){var r=n(124),i=n(20),s=n(33),o=s&&s.isTypedArray,a=o?i(o):r;t.exports=a},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,n){var r=n(126),i=n(31),s=n(3),o=n(32),a=n(35),c=n(59),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=s(t),l=!n&&i(t),h=!n&&!l&&o(t),f=!n&&!l&&!h&&c(t),p=n||l||h||f,d=p?r(t.length,String):[],g=d.length;for(var v in t)!e&&!u.call(t,v)||p&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g))||d.push(v);return d}},function(t,e,n){var r=n(63),i=n(130),s=n(132);t.exports=function(t,e){return s(i(t,e,r),t+"")}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(15),i=n(19),s=n(35),o=n(2);t.exports=function(t,e,n){if(!o(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&s(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(46),i=n(138),s=n(34),o=n(139),a=n(142),c=n(51),u=n(53),l=n(143),h=n(145),f=n(146),p=n(147),d=n(39),g=n(152),v=n(153),m=n(54),b=n(3),_=n(32),x=n(157),y=n(2),w=n(159),j=n(36),A=n(12),k={};k["[object Arguments]"]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k["[object Object]"]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k["[object Function]"]=k["[object WeakMap]"]=!1,t.exports=function t(e,n,S,O,E,N){var F,P=1&n,V=2&n,T=4&n;if(S&&(F=E?S(e,O,E,N):S(e)),void 0!==F)return F;if(!y(e))return e;var M=b(e);if(M){if(F=g(e),!P)return u(e,F)}else{var I=d(e),U="[object Function]"==I||"[object GeneratorFunction]"==I;if(_(e))return c(e,P);if("[object Object]"==I||"[object Arguments]"==I||U&&!E){if(F=V||U?{}:m(e),!P)return V?h(e,a(F,e)):l(e,o(F,e))}else{if(!k[I])return E?e:{};F=v(e,I,P)}}N||(N=new r);var C=N.get(e);if(C)return C;N.set(e,F),w(e)?e.forEach((function(r){F.add(t(r,n,S,r,e,N))})):x(e)&&e.forEach((function(r,i){F.set(i,t(r,n,S,i,e,N))}));var L=M?void 0:(T?V?p:f:V?A:j)(e);return i(L||e,(function(r,i){L&&(r=e[i=r]),s(F,i,t(r,n,S,i,e,N))})),F}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(38),i=n(29),s=n(37),o=n(66),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,s(t)),t=i(t);return e}:o;t.exports=a},function(t,e,n){var r=n(38),i=n(3);t.exports=function(t,e,n){var s=e(t);return i(t)?s:r(s,n(t))}},function(t,e,n){var r=n(3),i=n(164),s=n(165),o=n(168);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:s(o(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(21);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},function(t,e,n){var r=n(38),i=n(184);t.exports=function t(e,n,s,o,a){var c=-1,u=e.length;for(s||(s=i),a||(a=[]);++c<u;){var l=e[c];n>0&&s(l)?n>1?t(l,n-1,s,o,a):r(a,l):o||(a[a.length]=l)}return a}},function(t,e,n){const r=n(7),i=n(202),s=n(205),o=n(206),a=n(76),c=n(207),u=n(208),l=n(77),h=n(40);class f{static isSystemFunction(t){return-1!=["Input","Prompt","Pause"].findIndex(e=>e==t)}constructor(t,e,n,r,i){this._nothing=!1,this.user=t,this._input=e,this.input=""+e.text,this.intents=e.intents,"event"===e.type&&(this.event={type:e.type,name:e.name,data:e.data}),this.output=n.output,this.session=n.session,this.propagate=r,this.start=r.start,this.options=n,this.interpreter=i,this.converse=this.interpreter.converse,this.parent=this.converse.parent,this.decorators=i.decorators,this.hooks=i.converse._hooks,this.obj=i._obj,this.namespace=i.namespace,this._finishScript=this.options._finishScript,this._errorScript=this.options._errorScript,this.error=new h(i.converse.script,this.namespace,this._errorScript),this.user.setMagicVariable("text",this.input),this.instructionsRoot(()=>{this.event?this.triggerEvent():this.go().catch(this._errorScript)}).catch(this._errorScript)}deepBlock(t,e,n=0){const i=e[n],{index:s}=this.interpreter.index[i];let o=t.instructions[s];o.conditionsElse&&i==o.conditionsElse.id&&(o=o.conditionsElse);const a=r.merge(o,{indexBlock:s});return e[n+1]?[a,...this.deepBlock(o,e,n+1)]:[a]}triggerEvent(){let t=this.decorators.get("Event",["on",this.event.name]);"start"==this.event.name&&(t=t.concat(this.decorators.get("Event","start"))),t.length>0?(this.event.data&&this.user.setMagicVariable("event",this.event.data),this.decorators.exec(t,this)):(this._noExec=!0,this.end())}triggerAction(){const t=this.action(this.input);if(t){this.user.setMagicVariable("action",t.value);const e=this.decorators.get("Action",t.name);if(e.length>0)return this.decorators.exec(e,this),!0}}action(t){const e=t.match(/^action\?([a-zA-Z0-9_-]+)(=?)(.*)$/);if(!e)return!1;const n={name:e[1]};return e[3]&&(n.value=e[3]),n}async go(t=0){const e=this,n=this.interpreter.index[this.user.getAddress(this.namespace)];let i=!1,s=!1;const o={start:this.decorators.get("Event","start"),startAndIntent:this.decorators.get("Event","startAndIntent"),nothing:this.decorators.get("Event","nothing")};if(this.user.addressStackIslocked(this.namespace))return this.stopScript();if(this.triggerAction())return this.stopScript();if(this.decorators.get("Intent").length&&(s=await this.decorators.execMethod("Intent","run",this),s&&(i=!0)),!s&&n){let{index:e,level:s,deep:o}=n,a=this.interpreter.fn[s];this.user.popAddress(this.namespace);const c=e=>this.execFn(a,e+1,e=>{if(e.hasActivateDecorator)if(!0!==e.value)this.user.popAddress(this.parent.namespace);else if(this.parent){const t=this.parent._canActivated.indexOf(this.converse.name);if(-1!=t&&this.parent._canActivated.length>t+1){const e=this.parent._canActivated[t+1],n=this.parent._skills.get(e);for(let t in n._interpreter.index){const e=n._interpreter.index[t];if(e.hasActivateDecorator){this.user.addAddress(t,e.namespace);break}}}else{const t=this.user._infoAddress.actived[this.parent.namespace];this.unlockParent(t,{activated:!0})}}const n=this.user.getAddress(this.namespace);if(n){const t=this.converse._interpreter.index[n];this.setReturnVariable({name:e.level},e.value,t.level)}else if(this.parent){const t=this.user.getAddress(this.parent.namespace);if(t){const n=this.parent._interpreter.index[t],i=r.last(this.namespace.split("-"));this.parent.bufferFunction=t=>{t.setReturnVariable({name:i+"-"+e.level},e.value,n.level)}}}this.go(t+1)}),u=(t,e,n,r)=>{let i=t[n];n<0?r(t[0]):this.execBlock(i,e+1,s,()=>u(t,i.indexBlock,n-1,r))};if(o.length>0){let t=this.deepBlock(a,o);u(t,e,t.length-1,t=>{c(t.indexBlock)})}else c(e);i=!0}else!s&&this.start&&o.start.length?i=await this.decorators.exec(o.start,this):s&&this.start&&o.startAndIntent.length&&(i=await this.decorators.exec(o.startAndIntent,this),s&&!i&&(i=!0));i||async function(){0===t&&(e._noExec=!0,e._nothing=!0,o.nothing.length&&(e.user.nothingSkill||(e.user.nothingSkill=e)),!e.parent&&e.user.nothingSkill&&await e.user.nothingSkill.execNothing()),e.end()}()}execNothing(){const t=this.decorators.get("Event","nothing");return this._noExec=!1,this.decorators.exec(t,this)}stopScript(){this.parent||(this.user.nothingSkill=null),this._finishScript({noExec:this._noExec,nothing:this._nothing})}end(){this.options.finish&&this.options.finish.call(this),this.user.clearAddress(this.namespace),this.stopScript()}unlockParent(t){this.parent&&this.user.unlockAddressStack(this.parent.namespace,t)}instructionsRoot(t){return this.converse.bufferFunction&&(this.converse.bufferFunction(this),this.converse.bufferFunction=null),this.instructions(this.obj,0,"root",t)}async instructions(t,e,n="root",i,s={}){let o=t[e];try{const{isBlock:a}=s,c=({stop:r,value:o}={})=>(r&&(e=t.length,s.value=o,s.stop=r),this.instructions(t,e+1,n,i,s));if(!o){if(a||(this.unlockParent(n),this.options.finishFn&&this.options.finishFn.call(this,n)),i){const t=this.interpreter.fn[n];let e=!1;t&&(e=-1!=t.decorators.findIndex(t=>"Event"==t.name&&t.params&&t.params[0]==l.CAN_ACTIVATE)),i({stop:s.stop,value:s.value,level:n,hasActivateDecorator:e})}return void(a||this.user.garbage(n,this.namespace))}if(!r.isUndefined(o.return)){const t=await this.getValue(o,o.return,n);return void(a?i({stop:!0,value:t}):c({stop:!0,value:t}))}if(o._pointer=e,o._instructions=t,this.debug("ins",{level:n,...o}),o.group){let t=o.group[r.random(0,o.group.length-1)];t.decorators=o.decorators,o=t}if(o.condition)await this.execCondition(o,n,c);else if(o.variable)await this.execVariable(o,n,c);else if(o.loop)await this.execLoop(o,n,c);else if(o.output&&"root"!=n)this.execOutput(o,n,c);else if(o.type&&!s.refresh)switch(o.type){case"function":c();break;case"executeFn":let t=await this.findFunctionAndExec(o,n);this.setReturnVariable(o,t,n),c()}}catch(t){throw this.error.throw(o,t.id,t)}}debug(t,e){this.options.debug&&this.options.debug(t,{namespace:this.namespace,data:this.output.data,user:this.user,...e})}findFunctionAndExec(t,e,n){return t=r.cloneDeep(t),new Promise(async(i,s)=>{try{if(!r.isString(t.name)){const{variable:e,type:n,deep:r}=t.name;e&&(t.name=e),t.deep=r}const s=async(t,s,o)=>{if(t.interpreter.fn[s.name]){const n=s.params,a=t.interpreter.fn[s.name],c=a.params;o&&this.user.lockAddressStack(this.namespace,s.name),this.user.addAddress(s.id,this.namespace);let u=[];if(c)for(let i=0;i<c.length;i++)u.push(new Promise(async o=>{await t.execVariable({variable:c[i],value:r.isUndefined(n[i])?null:await this.getValue(s,n[i],e)},s.name,o)}));return Promise.all(u).then(()=>t.execFn(a,0,t=>{this.user.popAddress(this.namespace),i(t.value)})),!0}if(t.hasApiFn(s.name)){let r=await this.execApiFn(s,e,n,{deep:s.deep,data:this.options.data,context:t});return f.isSystemFunction(s.name)||i(r),!0}return!1};if(!await s(this,t)){const n=this.getSkill(t.name);if(n){t.name=t.deep[0],t.deep.splice(0,1);await s(n._interpreter.execution,t,!0)||this.error.throw(t,"function.not.defined")}else if(t.deep){const n=t.deep.slice(0,-1),s={variable:t.name,deep:n};t.deep.length>1&&(s.type="object");const o=await this.getValue(t,s,e),a=o[r.last(t.deep)];a?i(a.apply(o,t.params)):this.error.throw(t,"function.not.defined")}else this.error.throw(t,"function.not.defined")}}catch(t){s(t)}})}getSkill(t){const e=this.converse.skills().get(t);if(r.isArray(e)){return e[this.user.getRealSkill(t)]}return e}getScope(t){return"root"==t?this.user.getVariables(this.namespace):this.user.getVariableInFonction(this.namespace,t)}getVariable(t,e,n){const i=!r.isUndefined(n);let s=t.variable;if(this.converse._constants[s]){if(i)throw new Error("TypeError: Assignment to constant variable");return this.converse._constants[s]}const o=this.user.getVariableInFonction(this.namespace,e,s);if(/^\$/.test(s)){const r=this.user.getVariable(this.namespace,s);return i&&!this.setDeepObject(t,r,n,e)&&this.user.setVariable(this.namespace,s,n),this.getDeepObject(t,r,e)}if(i&&!this.setDeepObject(t,o,n,e)&&this.user.setVariableInFonction(this.namespace,e,s,n),!r.isUndefined(o))return this.getDeepObject(t,o,e)}setVariable(t,e,n){this.getVariable(t,n,e)}setReturnVariable(t,e,n){let r=t.name;"object"==r.type&&(r=r.variable+"-"+r.deep.join("-")),this.setVariable({variable:"__return_"+r},e,n)}setMagicVar(t,e){this.user.magicVar[t]=e}getMagicVar(t,e,n){const r=this.user.magicVar[t.replace(":","")];return this.getDeepObject(e,r,n)}async _deepObject(t,e,n,i){const s=!r.isUndefined(i);let o=await this.execParams(t,t.deep,n);return r[s?"set":"get"](e,o,i)}getDeepObject(t,e,n){return"object"!=t.type?e:this._deepObject(t,e,n)}setDeepObject(t,e,n,r){return"assignObject"==t.type&&this._deepObject(t,e,r,n)}getValue(t,e,n,i){return new Promise(async(s,a)=>{try{this.getScope(n);let a=e;if(null===a)return s(a);if(e.regexp)a=new RegExp(e.regexp,e.flags.join(""));else if(r.isArray(e))a=await o.map(e,e=>this.getValue(t,e,n));else if(e.expression)a=await this.execExpression(t,e.expression,e.variables,n);else if(e.variable)if(/^:/.test(e.variable)){let t=a.variable;a=this.getMagicVar(t,a,n)}else a=await this.getVariable(e,n);else if(e.text&&!e.__deepIndex)a=await c(e.text,/\{([^\}]+)\}/g,async(r,i)=>this.getValue(t,e.variables[i].value,n));else if("executeFn"==e.type)a=await this.findFunctionAndExec({...e,id:t.id},n);else if(a.__deepIndex)for(let e of a.__deepIndex){let s=await this.getValue(t,r.get(a,e),n,i);r.set(a,e,s)}r.isString(a)&&"#"===a[0]&&(a=await this.translate(t,a.substr(1),n)),s(a)}catch(t){a(t)}})}async execBlock(t,e=0,n,i){let s;if(t.varLocal){let e=await this.getValue(t,t.array,n);if(r.isNumber(e))e=new Array(e+1).fill(0).map((t,e)=>e);else if(r.isPlainObject(e))delete e.__deepIndex,e=Object.values(e);else if(!r.isString(e)&&!r.isArray(e)){const t=new Error("Number, Object, String and Array are only accepted for this loop");throw t.id="type.error",t}t.array=e,s=this.getVariable({variable:"__"+t.varLocal.variable},n),this.setVariable(t.varLocal,t.array[s],n)}await this.instructions(t.instructions,e,n,async e=>{t.loop?t.varLocal?s<t.array.length-1?(this.setVariable({variable:"__"+t.varLocal.variable},s+1,n),await this.execBlock(t,0,n,i)):i(e):this.execCondition(t,n,i):i(e)},{isBlock:!0})}async execLoop(t,e,n){this.setVariable({variable:"__"+t.varLocal.variable},0,e),await this.execBlock(t,0,e,n)}execCondition(t,e,n){return new Promise((n,r)=>{this.getValue(t,t.condition,e).then(n).catch(r)}).then(i=>{switch(t.keyword){case"unknown":i=r.isUndefined(i)||r.isNull(i);break;case"defined":i=!r.isUndefined(i)&&!r.isNull(i)}i?this.execBlock(t,0,e,n):t.conditionsElse?this.execBlock(t.conditionsElse,0,e,n):n()})}execExpression(t,e,n,i){return new Promise(async(o,a)=>{e=(e=(e=(e=(e=await c(e,/\{([0-9]+)\}/g,async(e,s)=>{let o=await this.getValue(t,n[s],i);return/^[0-9]+(\.[0-9]+)?$/.test(o)||r.isBoolean(o)||null===o||(o=`"${o}"`),o})).replace(/'/g,'"')).replace(/not/g,"!")).replace(/and/g,"&&")).replace(/or/g,"||");try{const t=s(e);o(this.arithmetic(t))}catch(t){t.id="arithmetic.error",a(t)}})}arithmetic(t){let e,n;switch(t.left&&(e=this.arithmetic(t.left)),t.right&&(n=this.arithmetic(t.right)),t.type){case"BinaryExpression":switch(t.operator){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"==":return e==n;case">=":return e>=n;case"<=":return e<=n;case">":return e>n;case"<":return e<n}break;case"LogicalExpression":switch(t.operator){case"&&":return e&&n;case"||":return e||n}break;case"UnaryExpression":switch(t.operator){case"!":return!this.arithmetic(t.argument);case"-":return-this.arithmetic(t.argument)}break;default:return t.value}}execVariable(t,e,n){return new Promise((n,r)=>{this.getValue(t,t.value,e).then(n).catch(r)}).then(i=>{let s=this.getScope(e);r.isUndefined(s[t.variable.replace("$","")])||"root"!=e||this.start?(this.setVariable(t,i,e),n()):n()})}async translate(t,e,n,i=[]){const{converse:s}=this.interpreter,o=this.user.getLang()||s.lang.current;let a=s.lang.data[o]&&s.lang.get(e,null,o);if(!a&&s.lang.data[o]){const t=s.lang.getGroup(e);t.length>0&&(e=t[r.random(0,t.length-1)],a=!0)}return a&&(i=await this.execParams(t,i,n),e=s.lang.translate(e,o,...i)),e}execOutput(t,e,n){return new Promise(async(i,s)=>{const{converse:o}=this.interpreter;let c=t.output;if(!this.output)return;t.output.variables&&(c=await this.getValue(t,t.output,e)),c=c.replace(/\r$/,""),c=await this.translate(t,c,e,t.params);let u={};if(t.decorators)for(let n of t.decorators)if("Format"==n.name){let r=[...n.params];r=await this.execParams(t,r,e);let i=r[0];o._format[i]&&(r.splice(0,1),c=o._format[i].call(this.converse,c,r,this.options.data,this.user),a(c)&&(c=await c),this.converse.config.mergeMultiFormats?u=Object.assign(c,u):u[i]=c)}Object.keys(u).length>1&&(c=u);const l=t=>{const e=t||c,i=this.output(e,n,{user:this.user});r.isUndefined(i)||n()};this._triggerHook("sending",c,{user:this.user,data:this.options.data},(t,e)=>{if(t)throw t;l(e)})||l()})}execFn(t,e,n){return r.isUndefined(this.interpreter.fn[t.name])&&this.error.throw(t,"function.not.defined"),this.instructions(t.instructions,e,t.name,n)}execParams(t,e,n,r){return e?o.map(e,e=>this.getValue(t,e,n,r)):Promise.resolve([])}async execApiFn(t,e,n,r){return f.isSystemFunction(t.name)?(this.user.addAddress(t.id,this.namespace),this._triggerHook("prompt",t.params,{user:this.user,data:this.options.data,level:e}),this.options.waintingInput&&this.options.waintingInput.call(this,t.params,e),void this.stopScript()):(r.execution=r.context||this,r.level=e,r.ins=t,(r.context||this).interpreter.converse.execFunction(t.name,await this.execParams(t,t.params,e,n),n,this.user,r))}hasApiFn(t){return this.converse._functions[t]||f.isSystemFunction(t)}_triggerHook(t,e,n,r,i=!0){let s=!1;return this.hooks[t]&&(s=!0,this.hooks[t](this.input,e,n,r)),i&&this.parent&&this.parent._hooks[t]&&(s=!0,this.parent._hooks[t](this.input,e,n,r)),s}}t.exports=class{constructor(t,e,n){this._obj=t,this.index={},this._users=e,this.var=[],this.fn={},this.converse=n,this.namespace=this.converse.namespace,this.decorators=new u(this),this.organize(this._obj)}organize(t,e="root",n=[]){const r=i=>{let s=t[i];if(s){if(s.id=this.setId(s,e),s.type&&"function"==s.type){this.fn[s.name]=s,this.decorators.add(s);const t=-1!=s.decorators.findIndex(t=>"Event"==t.name&&t.params&&t.params[0]==l.CAN_ACTIVATE);return this.organize(s.instructions,s.name),i++,this.index[s.id]={level:s.name,namespace:this.namespace,index:-1,deep:n,hasActivateDecorator:t},void r(i)}(s.condition||s.loop)&&this.organize(s.instructions,e,n.concat(s.id)),s.conditionsElse&&(s.conditionsElse.id=this.setId(s.conditionsElse,e),this.organize(s.conditionsElse.instructions,e,n.concat(s.conditionsElse.id)),this.index[s.conditionsElse.id]={level:e,index:i,namespace:this.namespace,deep:n},i++),this.index[s.id]={level:e,index:i,namespace:this.namespace,deep:n},i++,r(i)}};r(0)}setId(t,e){let n=e+"-"+i(JSON.stringify(t));this.namespace&&(n+="-"+this.namespace);let r=1;for(;this.index[n+"-"+r];)r++;return n+"-"+r}exec(t,e,n,i){return new Promise((s,o)=>{this.execution=new f(t,e,r.merge({_finishScript:s,_errorScript:o},n),i,this)})}}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e){t.exports=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}},function(t,e,n){const r=n(22);t.exports=class extends r{static get CAN_ACTIVATE(){return"canActivate"}start(){return"start"==this.params[0]}nothing(){return"nothing"==this.params[0]}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,,,,,function(t,e,n){const r=n(7),i=n(23),s=n(40);"undefined"!=typeof window&&(window._=r);class o{constructor(t,e){this.variables={},this._script=t,this.namespace=e,this.parser=o.newbotParser}run(){if(i.is()&&!this.parser)throw'You can not use the parser. Integrate rather the "newbot.with-parser.min.js" file';try{return this.parser.parse(this._script)}catch(t){new s(this._script,this.namespace).syntax(t)}}line(t){return t=t.trim(),this.parser.parse(t)}isVariable(){}}t.exports=o},,,function(t,e,n){var r=n(88),i=n(129)((function(t,e,n){r(t,e,n)}));t.exports=i},function(t,e,n){var r=n(46),i=n(49),s=n(117),o=n(119),a=n(2),c=n(12),u=n(60);t.exports=function t(e,n,l,h,f){e!==n&&s(n,(function(s,c){if(f||(f=new r),a(s))o(e,n,c,l,t,h,f);else{var p=h?h(u(e,c),s,c+"",e,n,f):void 0;void 0===p&&(p=s),i(e,c,p)}}),c)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(14),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(14);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(14);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(14);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(13);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(13),i=n(24),s=n(25);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(16),i=n(102),s=n(2),o=n(48),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,h=u.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||i(t))&&(r(t)?f:a).test(o(t))}},function(t,e,n){var r=n(10),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=o.call(t);return r&&(e?t[a]=n:delete t[a]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,i=n(103),s=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!s&&s in t}},function(t,e,n){var r=n(1)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(106),i=n(13),s=n(24);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||i),string:new r}}},function(t,e,n){var r=n(107),i=n(108),s=n(109),o=n(110),a=n(111);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=o,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(17);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(17),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(17),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(17);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(18);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(18);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(18);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(18);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(118)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var c=o[t?a:++i];if(!1===n(s[c],c,s))break}return e}}},function(t,e,n){var r=n(49),i=n(51),s=n(52),o=n(53),a=n(54),c=n(31),u=n(3),l=n(56),h=n(32),f=n(16),p=n(2),d=n(58),g=n(59),v=n(60),m=n(125);t.exports=function(t,e,n,b,_,x,y){var w=v(t,n),j=v(e,n),A=y.get(j);if(A)r(t,n,A);else{var k=x?x(w,j,n+"",t,e,y):void 0,S=void 0===k;if(S){var O=u(j),E=!O&&h(j),N=!O&&!E&&g(j);k=j,O||E||N?u(w)?k=w:l(w)?k=o(w):E?(S=!1,k=i(j,!0)):N?(S=!1,k=s(j,!0)):k=[]:d(j)||c(j)?(k=w,c(w)?k=m(w):p(w)&&!f(w)||(k=a(j))):S=!1}S&&(y.set(j,k),_(k,j,b,x,y),y.delete(j)),r(t,n,k)}}},function(t,e,n){var r=n(1).Uint8Array;t.exports=r},function(t,e,n){var r=n(2),i=Object.create,s=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=s},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(5),i=n(57),s=n(0),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&i(t.length)&&!!o[r(t)]}},function(t,e,n){var r=n(11),i=n(12);t.exports=function(t){return r(t,i(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(2),i=n(30),s=n(128),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return s(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&o.call(t,a))&&n.push(a);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(62),i=n(64);t.exports=function(t){return r((function(e,n){var r=-1,s=n.length,o=s>1?n[s-1]:void 0,a=s>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(s--,o):void 0,a&&i(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),e=Object(e);++r<s;){var c=n[r];c&&t(e,c,r,o)}return e}))}},function(t,e,n){var r=n(131),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var s=arguments,o=-1,a=i(s.length-e,0),c=Array(a);++o<a;)c[o]=s[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=s[o];return u[e]=n(c),r(t,this,u)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(133),i=n(135)(r);t.exports=i},function(t,e,n){var r=n(134),i=n(50),s=n(63),o=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:s;t.exports=o},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var i=n(),s=16-(i-r);if(r=i,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(5),i=n(3),s=n(0);t.exports=function(t){return"string"==typeof t||!i(t)&&s(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(65);t.exports=function(t){return r(t,4)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(11),i=n(36);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(30),i=n(141),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(55)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(11),i=n(12);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(11),i=n(37);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}},function(t,e,n){var r=n(11),i=n(67);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(68),i=n(37),s=n(36);t.exports=function(t){return r(t,s,i)}},function(t,e,n){var r=n(68),i=n(67),s=n(12);t.exports=function(t){return r(t,s,i)}},function(t,e,n){var r=n(8)(n(1),"DataView");t.exports=r},function(t,e,n){var r=n(8)(n(1),"Promise");t.exports=r},function(t,e,n){var r=n(8)(n(1),"Set");t.exports=r},function(t,e,n){var r=n(8)(n(1),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(28),i=n(154),s=n(155),o=n(156),a=n(52);t.exports=function(t,e,n){var c=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new c(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,n);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(t);case"[object RegExp]":return s(t);case"[object Set]":return new c;case"[object Symbol]":return o(t)}}},function(t,e,n){var r=n(28);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(10),i=r?r.prototype:void 0,s=i?i.valueOf:void 0;t.exports=function(t){return s?Object(s.call(t)):{}}},function(t,e,n){var r=n(158),i=n(20),s=n(33),o=s&&s.isMap,a=o?i(o):r;t.exports=a},function(t,e,n){var r=n(39),i=n(0);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(160),i=n(20),s=n(33),o=s&&s.isSet,a=o?i(o):r;t.exports=a},function(t,e,n){var r=n(39),i=n(0);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e,n){var r=n(65);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(163);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e,n){var r=n(34),i=n(69),s=n(35),o=n(2),a=n(71);t.exports=function(t,e,n,c){if(!o(t))return t;for(var u=-1,l=(e=i(e,t)).length,h=l-1,f=t;null!=f&&++u<l;){var p=a(e[u]),d=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(u!=h){var g=f[p];void 0===(d=c?c(g,p,f):void 0)&&(d=o(g)?g:s(e[u+1])?[]:{})}r(f,p,d),f=f[p]}return t}},function(t,e,n){var r=n(3),i=n(21),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(o.test(t)||!s.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(166),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(s,"$1"):n||t)})),e}));t.exports=o},function(t,e,n){var r=n(167);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(25);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(169);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(10),i=n(70),s=n(3),o=n(21),a=r?r.prototype:void 0,c=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return i(e,t)+"";if(o(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e,n){var r=n(171);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(69),i=n(71);t.exports=function(t,e){for(var n=0,s=(e=r(e,t)).length;null!=t&&n<s;)t=t[i(e[n++])];return n&&n==s?t:void 0}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e){t.exports=function(t){return null===t}},function(t,e,n){var r=n(5),i=n(0);t.exports=function(t){return!0===t||!1===t||i(t)&&"[object Boolean]"==r(t)}},function(t,e,n){var r=n(176),i=n(64),s=n(177),o=parseFloat,a=Math.min,c=Math.random;t.exports=function(t,e,n){if(n&&"boolean"!=typeof n&&i(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=s(t),void 0===e?(e=t,t=0):e=s(e)),t>e){var u=t;t=e,e=u}if(n||t%1||e%1){var l=c();return a(t+l*(e-t+o("1e-"+((l+"").length-1))),e)}return r(t,e)}},function(t,e){var n=Math.floor,r=Math.random;t.exports=function(t,e){return t+n(r()*(e-t+1))}},function(t,e,n){var r=n(178);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(179),i=n(2),s=n(21),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(s(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||c.test(t)?u(t.slice(2),n?2:8):o.test(t)?NaN:+t}},function(t,e,n){var r=n(180),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},function(t,e){var n=/\s/;t.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(72);t.exports=function(t){return r(t)&&t!=+t}},function(t,e,n){var r=n(73);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(10),i=n(31),s=n(3),o=r?r.isConcatSpreadable:void 0;t.exports=function(t){return s(t)||i(t)||!!(o&&t&&t[o])}},function(t,e,n){var r=n(186),i=n(73),s=n(62),o=n(56),a=s((function(t,e){return o(t)?r(t,i(e,1,o,!0)):[]}));t.exports=a},function(t,e,n){var r=n(187),i=n(190),s=n(195),o=n(70),a=n(20),c=n(196);t.exports=function(t,e,n,u){var l=-1,h=i,f=!0,p=t.length,d=[],g=e.length;if(!p)return d;n&&(e=o(e,a(n))),u?(h=s,f=!1):e.length>=200&&(h=c,f=!1,e=new r(e));t:for(;++l<p;){var v=t[l],m=null==n?v:n(v);if(v=u||0!==v?v:0,f&&m==m){for(var b=g;b--;)if(e[b]===m)continue t;d.push(v)}else h(e,m,u)||d.push(v)}return d}},function(t,e,n){var r=n(25),i=n(188),s=n(189);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=s,t.exports=o},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(191);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(192),i=n(193),s=n(194);t.exports=function(t,e,n){return e==e?s(t,e,n):r(t,i,n)}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,i="/"===o.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var s=e.isAbsolute(t),o="/"===i(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!s).join("/"))||s||(t="."),t&&o&&(t+="/"),(s?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),s=r(n.split("/")),o=Math.min(i.length,s.length),a=o,c=0;c<o;c++)if(i[c]!==s[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return(u=u.concat(s.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,s=t.length-1;s>=1;--s)if(47===(e=t.charCodeAt(s))){if(!i){r=s;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,s=0,o=t.length-1;o>=0;--o){var a=t.charCodeAt(o);if(47!==a)-1===r&&(i=!1,r=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!i){n=o+1;break}}return-1===e||-1===r||0===s||1===s&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(42))},function(t,e,n){const r=n(199);var i,s=((i=new r).instance=function(){return i=new r},String.prototype.t=function(...t){return i.translate(this,...t)},"undefined"!=typeof Handlebars&&i.load.Handlebars(Handlebars),"undefined"!=typeof angular&&i.load.Angular(angular),"undefined"!=typeof Vue&&Vue.use(i.load.Vue),i);t.exports=s},function(t,e,n){let r,i=!1;"undefined"==typeof window&&(r=n(200),i=!0),t.exports=class t{constructor(){this.current="en",this.data={},this.options={},this._path=null,this._cache={},this._list=[]}set(t,e){return this.init(t,this._path,e),this}add(t,e,n,r){this.init(t,e,r,{namespace:n})}packages(t,e={}){let n=[];const r=e.namespace||"self";this._cache[r]||(this._cache[r]={});for(let e in t)this._cache[r][e]=t[e],n.push(e);return this.init(n,!1,!1,e)}default(t){this.current=t}all(t,e,n={}){const i=r=>{let i=[],s=/\.json$/;for(let t of r)s.test(t)&&i.push(t.replace(s,""));this.init(i,t,e,n)};e?r.readdir(t,(t,e)=>{if(t)throw t;i(e)}):i(r.readdirSync(t))}init(t,e,n,i={}){let s,o;const a=i.namespace||"self";"function"==typeof e&&(n=e,e=!1),this._path=e,t instanceof Array||(t=[t]),this._list=t;let c=(u=this.getUserLanguage().replace(/\-.+/,""))+"_"+u.toUpperCase();var u;-1==this._list.indexOf(c)?this.current=this._list[0]:this.current=c,e&&(s=e+this.current+".json");let l=(t,r,i)=>{let s;r||(r=this.current),e?(t=t.toString("utf8"),s=JSON.parse(t)):s=t,this._cache[a]||(this._cache[a]={});let[o,c]=s;this.data[r]={},this.options[r]={},this.data[r][a]=this._initMultiple(o),this.options[r][a]=c,this._cache[a][r]=t,n&&!i&&n.call(self)};if(this._cache[a]&&this._cache[a][this.current]){for(let t in this._cache[a])l(this._cache[a][t],t);return this}if(r){if(n){let t=0;for(let i of this._list)r.readFile(e+i+".json",(e,r)=>{if(e)throw e;l(r,i,!0),t++,n&&t==this._list.length&&n.call(this)})}else for(let t of this._list)l(r.readFileSync(e+t+".json"),t,!0);return this}try{o=new XMLHttpRequest}catch(t){o=!1}return o.onreadystatechange=()=>{4==o.readyState&&200==o.status&&l(o.responseText)},o.open("GET",s,!0),o.send(),this}getUserLanguage(){const t=this._list[0];return i?t:navigator.language||navigator.userLanguage||t}_initMultiple(t){let e,n,r={},i={};function s(t,e,n,r){let i={},s=r?r[t]:e[t],o=n.split(" ");for(let r in s){let s=n.replace(t,r);e[n].text?i[s]={text:e[n].text,replacePattern:e[n].replacePattern.map(e=>t==e?r:e)}:i[s]={text:e[n],replacePattern:o.map(e=>t==e?r:e)}}return i}function o(t,e){for(let n in e)t[n]=e[n];return t}const a=JSON.parse(JSON.stringify(t));for(let c in a){let a=/^\$[^ ]+$/.test(c),u=/\[(.+)\]/,l=/\$[^ ]+/g;if(u.test(c)){e=u.exec(c)[1].split(",");for(let n of e)t[c.replace(u,n)]=t[c]}if(l.test(c)&&!a)if(r={},i={},n=c.match(l),r=s(n[0],t,c),n.length>1)for(let e in r)i=s(n[1],r,e,t),o(t,i);else o(t,r);if(a){if(t[c]instanceof Array){let e={},n=c.replace(/^\$/,"");for(let r=0;r<t[c].length;r++)e[n+"_"+r]=t[c][r];t[c]=e}for(let e in t[c])t[e]=t[c][e]}}return t}get(t,e,n){return n=n||this.current,e=e||"self",this.data[n]&&this.data[n][e]?this.replaceWorlds(this.data[n][e][t],t,e):""}capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}replaceWorlds(t,e,n){let r={};return t?(t.text&&(r=t,t=t.text),t.replace(/\{([0-9]+)\}/g,(t,i)=>{let s=r.replacePattern||e.split(" ");return this.get(s[i-1],n)})):t}getGroup(t,e="self"){let n=this.data[this.current][e]["$"+t],r=[];for(let t in n)r.push(t);return r}render(t,{patternStart:e="{{",patternEnd:n="}}",pipe:r="|",fnStart:i="",fnEnd:s="",paramsSeparator:o=":"}={},a){const c=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");e=c(e),n=c(n),r=c(r),i=c(i),s=c(s);let u=c(o);const l=new RegExp(`${e}([^${n}]+)${r}[ ]*t(${u}?${i}([^${n}]+)${s})?${n}`,"g");return t=t.replace(l,(t,e,n,r,i,s)=>(e=(e=e.replace(/["']/g,"")).trim(),r=r?(r=r.split(o)).map(t=>((t=t.trim())>=0||t<=0?t=+t:"true"==t?t="true"===t:"false"==t&&(t="false"===t),t)):[],a&&(r=[a,...r]),this.translate(e,...r)))}getPlurial(t,e,n,r){if(n=n||"self",r=r||this.current,t=Math.abs(t),!/^[0-9]+$/.test(t))return!1;let i=this.options[r][n].plurial[e];return i||(i=["s"]),t>2&&i[t-1]?i[t-1]:t>1?i[0]:i[1]||""}format(t,e,n,...r){let i,s,o=-1,a=t.match(/%[sdp]/g);if(!a)return t;for(let t of a)if(o++,"%d"==t)i=r[o];else if("%p"==t)break;return o=-1,t.replace(/%[sdp]([0-9]+)?/g,(t,a)=>(o++,s=void 0!==r[o]?r[o]:t,/^%p/.test(t)&&(null==i&&(i=s),"number"!=typeof i&&(i=0),s=this.getPlurial(i,t.replace("%",""),e,n)),s))}get load(){let e=this;return{Handlebars:t=>(t.registerHelper("t",(function(t,e){var n=e.hash.nb,r=e.hash.if;return void 0===n?t.t():void 0===r?t.t(+n):t.t(r,+n)})),t),Pug:(t={})=>(t.translate=t=>e.render(t),t),Angular(n){n.module("Languages",[]).provider("Languages",(function(){this.init=e.init.bind(t),this.$get=function(){return e}})).filter("t",(function(){return function(t,...e){return t.t(...e)}}))},get Vue(){return{install(t,n){t.Languages=e,t.filter("t",(t,...n)=>e.translate(t,...n))}}}}}translate(t,...e){var n,r,i;if(null==t)return"";let s=e[0];function o(){e.shift(),s=e[0]}if(-1!=this._list.indexOf(e[0])&&(i=s,o()),"boolean"==typeof s){let e=t.match(/\((.*?)\)/);e?(n=e[1].split("|"),r=s?t.replace(e[0],n[0].trim()):t.replace(e[0],n[1].trim())):(n=t.split("|"),r=s?n[0]:n[1]),o()}else r=t;let a=r.split("+"),c="";for(let t of a){let n,r;(n=/(.+)\.(.+)/.exec(t))&&(r=n[1],t=n[2]);let s=this.get(t.trim(),r,i);s&&(c+=this.format(s,r,i,...e)),c+=" "}return this.capitalizeFirstLetter(c.trim())}}},function(t,e){},function(t,e,n){const r=n(7);t.exports=class{constructor(t){this.address={},this._infoAddress={lock:{},actived:{}},this._realSkill={},this.varFn={},this.magicVar={},this.variables={},this.id=t,this.lang=null,this._history=[],this._nlpCache={}}_createNamespace(t){this.address[t]||(this.address[t]=[]),this.variables[t]||(this.variables[t]={}),this.varFn[t]||(this.varFn[t]={})}addAddress(t,e){this._createNamespace(e),this.address[e].push(t)}getAddress(t){return this._createNamespace(t),r.last(this.address[t])}hasAddress(t){return this._createNamespace(t),this.address[t].length>0}clearAddress(t){this._createNamespace(t),this.address[t]=[]}popAddress(t){this._createNamespace(t),this.address[t].pop()}garbage(t,e){this._createNamespace(e),delete this.varFn[e][t]}hasLockAddressStack(t){return!!this._infoAddress.lock[t]}lockAddressStack(t,e,{activated:n}={}){this._infoAddress.lock[t]=e,n&&(this._infoAddress.actived[t]=e)}unlockAddressStack(t,e,{activated:n}={}){this._infoAddress.lock[t]===e&&(delete this._infoAddress.lock[t],n&&delete this._infoAddress.actived[t])}addressStackIslocked(t){return this._infoAddress.lock[t]}getVariables(t){return this._createNamespace(t),this.variables[t]}getVariable(t,e){return e=e.replace(/^\$/,""),this._createNamespace(t),this.variables[t][e]}setVariable(t,e,n){e=e.replace(/^\$/,""),this._createNamespace(t),this.variables[t][e]=n}getVariableInFonction(t,e,n){return this._createNamespace(t),this.varFn[t][e]||(this.varFn[t][e]={}),n?this.varFn[t][e][n]:this.varFn[t][e]}setVariableInFonction(t,e,n,r){return this._createNamespace(t),this.varFn[t][e]||(this.varFn[t][e]={}),this.varFn[t][e][n]=r}getMagicVariable(t){return this.magicVar[t]}setMagicVariable(t,e){this.magicVar[t]=e}saveSession(t){this.session=t}retrieveSession(){return this.session}setRealSkill(t,e){this._realSkill[t]=e}getRealSkill(t){return this._realSkill[t]||0}setLang(t){this.lang=t}getLang(){return this.lang}addHistory(t){this._history.push(t)}resetHistory(t){this._history=[]}toJson(){return{_current:{_address:this.address,_var:this.varFn,_magicVar:this.magicVar,_infoAddress:this._infoAddress},_session:this.session,data:this.variables,lang:this.lang,id:this.id}}fromJson(t){return this.address=t._current._address||{},this._infoAddress=t._current._infoAddress||{lock:{}},this.varFn=t._current._var||{},this.magicVar=t._current._magicVar||{},this.session=t._session||{},this.variables=t.data||{},this.lang=t.lang,this.id=t.id,this}}},function(t,e,n){var r,i,s,o,a;r=n(203),i=n(75).utf8,s=n(204),o=n(75).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?o.stringToBytes(t):i.stringToBytes(t):s(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=r.bytesToWords(t),c=8*t.length,u=1732584193,l=-271733879,h=-1732584194,f=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var d=a._ff,g=a._gg,v=a._hh,m=a._ii;for(p=0;p<n.length;p+=16){var b=u,_=l,x=h,y=f;u=d(u,l,h,f,n[p+0],7,-680876936),f=d(f,u,l,h,n[p+1],12,-389564586),h=d(h,f,u,l,n[p+2],17,606105819),l=d(l,h,f,u,n[p+3],22,-1044525330),u=d(u,l,h,f,n[p+4],7,-176418897),f=d(f,u,l,h,n[p+5],12,1200080426),h=d(h,f,u,l,n[p+6],17,-1473231341),l=d(l,h,f,u,n[p+7],22,-45705983),u=d(u,l,h,f,n[p+8],7,1770035416),f=d(f,u,l,h,n[p+9],12,-1958414417),h=d(h,f,u,l,n[p+10],17,-42063),l=d(l,h,f,u,n[p+11],22,-1990404162),u=d(u,l,h,f,n[p+12],7,1804603682),f=d(f,u,l,h,n[p+13],12,-40341101),h=d(h,f,u,l,n[p+14],17,-1502002290),u=g(u,l=d(l,h,f,u,n[p+15],22,1236535329),h,f,n[p+1],5,-165796510),f=g(f,u,l,h,n[p+6],9,-1069501632),h=g(h,f,u,l,n[p+11],14,643717713),l=g(l,h,f,u,n[p+0],20,-373897302),u=g(u,l,h,f,n[p+5],5,-701558691),f=g(f,u,l,h,n[p+10],9,38016083),h=g(h,f,u,l,n[p+15],14,-660478335),l=g(l,h,f,u,n[p+4],20,-405537848),u=g(u,l,h,f,n[p+9],5,568446438),f=g(f,u,l,h,n[p+14],9,-1019803690),h=g(h,f,u,l,n[p+3],14,-187363961),l=g(l,h,f,u,n[p+8],20,1163531501),u=g(u,l,h,f,n[p+13],5,-1444681467),f=g(f,u,l,h,n[p+2],9,-51403784),h=g(h,f,u,l,n[p+7],14,1735328473),u=v(u,l=g(l,h,f,u,n[p+12],20,-1926607734),h,f,n[p+5],4,-378558),f=v(f,u,l,h,n[p+8],11,-2022574463),h=v(h,f,u,l,n[p+11],16,1839030562),l=v(l,h,f,u,n[p+14],23,-35309556),u=v(u,l,h,f,n[p+1],4,-1530992060),f=v(f,u,l,h,n[p+4],11,1272893353),h=v(h,f,u,l,n[p+7],16,-155497632),l=v(l,h,f,u,n[p+10],23,-1094730640),u=v(u,l,h,f,n[p+13],4,681279174),f=v(f,u,l,h,n[p+0],11,-358537222),h=v(h,f,u,l,n[p+3],16,-722521979),l=v(l,h,f,u,n[p+6],23,76029189),u=v(u,l,h,f,n[p+9],4,-640364487),f=v(f,u,l,h,n[p+12],11,-421815835),h=v(h,f,u,l,n[p+15],16,530742520),u=m(u,l=v(l,h,f,u,n[p+2],23,-995338651),h,f,n[p+0],6,-198630844),f=m(f,u,l,h,n[p+7],10,1126891415),h=m(h,f,u,l,n[p+14],15,-1416354905),l=m(l,h,f,u,n[p+5],21,-57434055),u=m(u,l,h,f,n[p+12],6,1700485571),f=m(f,u,l,h,n[p+3],10,-1894986606),h=m(h,f,u,l,n[p+10],15,-1051523),l=m(l,h,f,u,n[p+1],21,-2054922799),u=m(u,l,h,f,n[p+8],6,1873313359),f=m(f,u,l,h,n[p+15],10,-30611744),h=m(h,f,u,l,n[p+6],15,-1560198380),l=m(l,h,f,u,n[p+13],21,1309151649),u=m(u,l,h,f,n[p+4],6,-145523070),f=m(f,u,l,h,n[p+11],10,-1120210379),h=m(h,f,u,l,n[p+2],15,718787259),l=m(l,h,f,u,n[p+9],21,-343485551),u=u+b>>>0,l=l+_>>>0,h=h+x>>>0,f=f+y>>>0}return r.endian([u,l,h,f])})._ff=function(t,e,n,r,i,s,o){var a=t+(e&n|~e&r)+(i>>>0)+o;return(a<<s|a>>>32-s)+e},a._gg=function(t,e,n,r,i,s,o){var a=t+(e&r|n&~r)+(i>>>0)+o;return(a<<s|a>>>32-s)+e},a._hh=function(t,e,n,r,i,s,o){var a=t+(e^n^r)+(i>>>0)+o;return(a<<s|a>>>32-s)+e},a._ii=function(t,e,n,r,i,s,o){var a=t+(n^(e|~r))+(i>>>0)+o;return(a<<s|a>>>32-s)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?o.bytesToString(n):r.bytesToHex(n)}},function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],s=0;s<4;s++)8*r+6*s<=8*t.length?e.push(n.charAt(i>>>6*(3-s)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){!function(n){"use strict";var r=function(t,e){var n=new Error(t+" at character "+e);throw n.index=e,n.description=t,n},i={"-":!0,"!":!0,"~":!0,"+":!0},s={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},o=function(t){var e,n=0;for(var r in t)(e=r.length)>n&&t.hasOwnProperty(r)&&(n=e);return n},a=o(i),c=o(s),u={true:!0,false:!1,null:null},l=function(t){return s[t]||0},h=function(t,e,n){return{type:"||"===t||"&&"===t?"LogicalExpression":"BinaryExpression",operator:t,left:e,right:n}},f=function(t){return t>=48&&t<=57},p=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=128&&!s[String.fromCharCode(t)]},d=function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t>=128&&!s[String.fromCharCode(t)]},g=function(t){for(var e,n,o=0,g=t.charAt,v=t.charCodeAt,m=function(e){return g.call(t,e)},b=function(e){return v.call(t,e)},_=t.length,x=function(){for(var t=b(o);32===t||9===t||10===t||13===t;)t=b(++o)},y=function(){var t,e,n=j();return x(),63!==b(o)?n:(o++,(t=y())||r("Expected expression",o),x(),58===b(o)?(o++,(e=y())||r("Expected expression",o),{type:"ConditionalExpression",test:n,consequent:t,alternate:e}):void r("Expected :",o))},w=function(){x();for(var e=t.substr(o,c),n=e.length;n>0;){if(s.hasOwnProperty(e)&&(!p(b(o))||o+e.length<t.length&&!d(b(o+e.length))))return o+=n,e;e=e.substr(0,--n)}return!1},j=function(){var t,e,n,i,s,a,c,u,f;if(a=A(),!(e=w()))return a;for(s={value:e,prec:l(e)},(c=A())||r("Expected expression after "+e,o),i=[a,s,c];(e=w())&&0!==(n=l(e));){for(s={value:e,prec:n},f=e;i.length>2&&n<=i[i.length-2].prec;)c=i.pop(),e=i.pop().value,a=i.pop(),t=h(e,a,c),i.push(t);(t=A())||r("Expected expression after "+f,o),i.push(s,t)}for(t=i[u=i.length-1];u>1;)t=h(i[u-1].value,i[u-2],t),u-=2;return t},A=function(){var e,n,r;if(x(),e=b(o),f(e)||46===e)return k();if(39===e||34===e)return S();if(91===e)return P();for(r=(n=t.substr(o,a)).length;r>0;){if(i.hasOwnProperty(n)&&(!p(b(o))||o+n.length<t.length&&!d(b(o+n.length))))return o+=r,{type:"UnaryExpression",operator:n,argument:A(),prefix:!0};n=n.substr(0,--r)}return!(!p(e)&&40!==e)&&N()},k=function(){for(var t,e,n="";f(b(o));)n+=m(o++);if(46===b(o))for(n+=m(o++);f(b(o));)n+=m(o++);if("e"===(t=m(o))||"E"===t){for(n+=m(o++),"+"!==(t=m(o))&&"-"!==t||(n+=m(o++));f(b(o));)n+=m(o++);f(b(o-1))||r("Expected exponent ("+n+m(o)+")",o)}return e=b(o),p(e)?r("Variable names cannot start with a number ("+n+m(o)+")",o):46===e&&r("Unexpected period",o),{type:"Literal",value:parseFloat(n),raw:n}},S=function(){for(var t,e="",n=m(o++),i=!1;o<_;){if((t=m(o++))===n){i=!0;break}if("\\"===t)switch(t=m(o++)){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return i||r('Unclosed quote after "'+e+'"',o),{type:"Literal",value:e,raw:n+e+n}},O=function(){var e,n=b(o),i=o;for(p(n)?o++:r("Unexpected "+m(o),o);o<_&&(n=b(o),d(n));)o++;return e=t.slice(i,o),u.hasOwnProperty(e)?{type:"Literal",value:u[e],raw:e}:"this"===e?{type:"ThisExpression"}:{type:"Identifier",name:e}},E=function(t){for(var e,n,i=[],s=!1,a=0;o<_;){if(x(),(e=b(o))===t){s=!0,o++,41===t&&a&&a>=i.length&&r("Unexpected token "+String.fromCharCode(t),o);break}if(44===e){if(o++,++a!==i.length)if(41===t)r("Unexpected token ,",o);else if(93===t)for(var c=i.length;c<a;c++)i.push(null)}else(n=y())&&"Compound"!==n.type||r("Expected comma",o),i.push(n)}return s||r("Expected "+String.fromCharCode(t),o),i},N=function(){var t,e;for(e=40===(t=b(o))?F():O(),x(),t=b(o);46===t||91===t||40===t;)o++,46===t?(x(),e={type:"MemberExpression",computed:!1,object:e,property:O()}):91===t?(e={type:"MemberExpression",computed:!0,object:e,property:y()},x(),93!==(t=b(o))&&r("Unclosed [",o),o++):40===t&&(e={type:"CallExpression",arguments:E(41),callee:e}),x(),t=b(o);return e},F=function(){o++;var t=y();if(x(),41===b(o))return o++,t;r("Unclosed (",o)},P=function(){return o++,{type:"ArrayExpression",elements:E(93)}},V=[];o<_;)59===(e=b(o))||44===e?o++:(n=y())?V.push(n):o<_&&r('Unexpected "'+m(o)+'"',o);return 1===V.length?V[0]:{type:"Compound",body:V}};g.version="0.3.5",g.toString=function(){return"JavaScript Expression Parser (JSEP) v"+g.version},g.addUnaryOp=function(t){return a=Math.max(t.length,a),i[t]=!0,this},g.addBinaryOp=function(t,e){return c=Math.max(t.length,c),s[t]=e,this},g.addLiteral=function(t,e){return u[t]=e,this},g.removeUnaryOp=function(t){return delete i[t],t.length===a&&(a=o(i)),this},g.removeAllUnaryOps=function(){return i={},a=0,this},g.removeBinaryOp=function(t){return delete s[t],t.length===c&&(c=o(s)),this},g.removeAllBinaryOps=function(){return s={},c=0,this},g.removeLiteral=function(t){return delete u[t],this},g.removeAllLiterals=function(){return u={},this},t.exports?e=t.exports=g:e.parse=g}()},function(t,e){t.exports=new class{async map(t,e){for(let n=0;n<t.length;n++)t[n]=await e(t[n]);return t}}},function(t,e){t.exports=function(t,e,n=function(){}){if(!e.global)return function(t,e,n){const r=t.match(e);return r?n(...r,r.index,r.input).then(n=>t.replace(e,n)):Promise.resolve(t)}(t,e,n);const r=t.match(e);if(!r)return Promise.resolve(t);let i=0,s=0;const o=[],a=new RegExp(e.source,e.flags.replace("g","")),c=[];for(;r.length>0;){const e=r.shift(),u=t.indexOf(e,s);o[i]=t.slice(s,u),i++;let l=i;c.push(n(...e.match(a),u,t).then(t=>{o[l]=t})),s=u+e.length,i++}return o[i]=t.slice(s),Promise.all(c).then(()=>o.join(""))}},function(t,e,n){const r=n(209),i=n(40),s=n(7);t.exports=class{constructor(t){this.decorators={},this.interpreter=t,this.error=new i(this.interpreter.converse.script,this.interpreter.namespace);for(let t in r)this.decorators[t]=[]}add(t){if(!t.decorators)return;const{decorators:e,name:n}=t;let i=[];for(let s of e)this.decorators[s.name]||this.error.throw(t,"decorator.error",new Error(`Decorator "${s.name}" not exists`)),i.push(new r[s.name](s,n));for(let t of i){for(let e of i)t.name!=e.name&&(t.otherDecorators[e.name]||(t.otherDecorators[e.name]=[]),t.otherDecorators[e.name].push(e));this.decorators[t.name].push(t)}}get(t,e){let n=this.decorators[t],r=[];if(0===n.length)return[];s.isArray(e)||(e=[e]);for(let t of n)(s.isUndefined(e[0])||t.findParam(e))&&r.push(t);return r}async _exec(t,e,n,i){let s=!1;const o=async t=>{let n=!1;if(t.otherDecorators.Condition)for(let n of t.otherDecorators.Condition){if(!await n.run(e))return!1}const o=this.interpreter.fn[t.fnName],{_canActivated:a,_skills:c}=e.converse,u=t=>{const i=a[t],s=c.get(i),l=s._interpreter.execution.decorators,h=l.get("Event",r.Event.CAN_ACTIVATE);return 0!=h.length&&(l.exec(h,s._interpreter.execution,null,n=>{if(t++,!0!==n.value)return e.end();a[t]?u(t):e.execFn(o,0,()=>e.end())}),n=!0,!0)};return a.length>0&&(u(0)?(e.user.addAddress(o.id,e.namespace),e.user.lockAddressStack(e.namespace,o.name,{activated:!0})):e.debug("warning",{message:"You call skills in the canActivated property but are never triggered"})),s=!0,n||await e.execFn(o,0,t=>{if(!i)return e.end();i(t)}),!0};for(let r of t){let t=null;if(n&&r[n]&&(t=r[n](e)),t instanceof Promise){if(await t&&!s){if(await o(r))break}}else{if(await o(r))break}}return s}async execMethod(t,e,n){const r=this.decorators[t];return await this._exec(r,n,e)}async exec(t,e,n,r){return s.isArray(t)||(t=this.get(t,n)),!!t&&await this._exec(t,e,null,r)}}},function(t,e,n){const r=n(77),i=n(210),s=n(211),o=n(212);t.exports={Event:r,Intent:i,Action:s,Condition:o}},function(t,e,n){const r=n(22),i=n(7);t.exports=class extends r{run(t){return new Promise((e,n)=>{const{intents:r}=t;if(this.instructions&&this.instructions.length>0)return void t.execBlock({instructions:this.instructions},0,"test",()=>{e(!0)});if(!r)return e(!1);const s=this.params[0];let o=r[s];if(s.regexp){if(new RegExp(s.regexp,s.flags.join("")).test(t.input))return e(!0)}if(i.isFunction(o)&&(o=o()),o)return t.setMagicVar("intent",o),e(!0);e(!1)})}}},function(t,e,n){const r=n(22);t.exports=class extends r{}},function(t,e,n){const r=n(22);t.exports=class extends r{run(t){return new Promise(async(e,n)=>{const{converse:r,user:i,options:s}=t;for(let t of this.params){let o=r._conditions[t];if(!o)return void n(new Error(t+" condition function not exists"));let a=o(s.data,i);if(a instanceof Promise&&(a=await a),!a)return void e(!1)}e(!0)})}}},function(t,e,n){const r=n(214),i=n(215),s=n(216),o=n(217),a=n(218),c=n(219);t.exports={Users:r,Array:i,Lang:s,Utils:o,Eval:a,debugger:c}},function(t,e){const n={$params:["users"],nbUsers:t=>t.size,sum(t,e){let n=0;for(let[,r]of e)n+=+r.getVariable(this.namespace,t);return n},avg(t,e){return this.sum(t,e)/this.nbUsers(e)}};t.exports=n},function(t,e){const n={length:t=>t.length,push:(t,e)=>t.push(e),pushOnlyUniq(t,e){return-1===t.indexOf(e)?this.push(t,e):t},indexOf:(t,e)=>t.indexOf(e)};t.exports=n},function(t,e){const n={fr_FR:["Français","French"],en_EN:["English","English"]},r={$params:["user"],set(t,e){t&&e.setLang(t)},name(t){const e=t.getLang();return n[e][0]}};t.exports=r},function(t,e){const n={uniqid:()=>(new Date).valueOf().toString(36)+Math.random().toString(36).substr(2)};t.exports=n},function(t,e,n){const r=n(74),i={$params:["users","execution"],json(t,e,n){try{const{converse:i,user:s,_input:o,options:a,propagate:c}=n,u=JSON.parse(t);return new r(u,e,n.converse).exec(s,o,a,c)}catch(t){console.log(t)}}};t.exports=i},function(t,e){const n={$params:["user","execution","level"],$call(t,e,n){const{namespace:r}=e,i=(t,e)=>{console.log(`--- ${e} ---`);for(let e in t)console.log(`\n * ${e} = `,JSON.stringify(t[e],null,2));console.log("\n")};console.log("* Skill : "+r),console.log("* User Id : "+t.id),console.log("* Current Lang : "+t.lang),i(t.variables[r],"global variables"),i(t.magicVar,"magic variables"),i(t.varFn[r][n],n+"(...) function")}};t.exports=n},function(t,e){t.exports=class{constructor(t,e){this.script=t,this.history=e}organize(){this.script.split("\n");console.log(this.history[0]._file)}display(){const t=this.organize();console.log("--- %s ---",DEBUG);for(let e of t)console.log(e);console.log("------")}}},function(t,e,n){const r=n(7);t.exports=class{constructor(t,e,n={}){this.name=t,this.converse=e,this.options=n,this.uuid=n.uuid,this.priority=this.options.priority?this.options.priority:void 0,this.intents={}}add(t){r.isFunction(t)?this.intents=t:this.intents=r.merge(this.intents,t)}exec(t,e,n=this.converse){return new Promise((i,s)=>{if(n._mockNlp&&n._mockNlp[this.name]){const n=this.converse._mockNlp[this.name](t,e);i({structured:n})}else r.isFunction(this.intents)?this.intents(t,e,n).then(t=>{i({intents:t})}):i()}).then(({structured:r,intents:i}={})=>{i=i||this.intents;let s={};for(let o in i){let a=i[o],c="string"==typeof e?n._users.get(e):e,u=a(t,r,c);u&&(s[o]=u)}return s})}}},function(t,e,n){const r=n(223),i=n(23);t.exports=new class{readFile(t,e){return i.is()?new Promise((e,n)=>{const r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200==r.status?e(r.responseText):n(r))},r.open("GET",t,!0),r.send()}):new Promise((n,i)=>{r.readFile(t,e,(t,e)=>{if(t)return i(t);n(e)})})}}},function(t,e){},function(t){t.exports=JSON.parse('{"version":"0.7.0"}')}]);